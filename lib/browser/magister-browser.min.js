/* Magister.js (browser version) by simplyApps. Built on: 15-05-2015 16:58 UTC */
/*
	HTTP CLASS
	======================
	
	You have to implement this with your own serverside implementation.
	Beneath here are the requirements you have to follow.

 	======================
   MINIMAL REQUIREMENTS
 	======================
 	callback: function (error, result) {...}
 	result: { content (string), headers (dictionary) }
 	options: { headers (dictionary), data (object) }
	
 	get(url, options*, callback)
 	delete(url, options*, callback)
 	post(url, data, options*, callback)
 	put(url, data, options*, callback)
	
 	* = optional (Fill with default value if null (object) ex.: options ?= {})
	
 	Class holds variable _cookie which is required to be added to the headers
*/

(function() {		 
	this.MagisterHttp = (function() {
			function MagisterHttp() {}

			MagisterHttp.prototype.get = function(url, options, callback) {

			};

			MagisterHttp.prototype["delete"] = function(url, options, callback) {

			};

			MagisterHttp.prototype.post = function(url, data, options, callback) {

			};

			MagisterHttp.prototype.put = function(url, data, options, callback) {

			};

			MagisterHttp.prototype._cookie = "";

			return MagisterHttp;

	})();
}).call(this);
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=function(a,b){return function(){return a.apply(b,arguments)}};d=null!=(f="undefined"!=typeof module&&null!==module?module.exports:void 0)?f:this,d.Appointment=function(){function a(a){this._magisterObj=a,this.id=d._getset("_id"),this.begin=d._getset("_begin"),this.end=d._getset("_end"),this.beginBySchoolHour=d._getset("_beginBySchoolHour"),this.endBySchoolHour=d._getset("_endBySchoolHour"),this.fullDay=d._getset("_fullDay"),this.description=d._getset("_description"),this.location=d._getset("_location"),this.status=d._getset("_status"),this.type=d._getset("_type"),this.displayType=d._getset("_displayType"),this.content=d._getset("_content",null,function(a){return null!=a?a.replace(/<br ?\/?>/g,"\n").replace(/(<[^>]*>)|(&nbsp;)/g,"").replace(/\n{2,}/g,"\n").replace(/&amp;/gi,"&").trim():""}),this.infoType=d._getset("_infoType"),this.infoTypeString=d._getset("_infoType",null,function(a){switch(a){case 0:return"none";case 1:return"homework";case 2:return"test";case 3:return"exam";case 4:return"quiz";case 5:return"oral test";case 6:return"information";default:return"unknown"}}),this.notes=d._getset("_notes"),this.isDone=d._getset("_isDone",function(a){return function(b){return a._isDone!==b?(a._isDone=b,a._magisterObj.http.put(a.url(),a._toMagisterStyle(),{},function(){})):void 0}}(this)),this.classes=d._getset("_classes"),this.teachers=d._getset("_teachers"),this.classRooms=d._getset("_classRooms"),this.groups=d._getset("_groups"),this.appointmentId=d._getset("_appointmentId"),this.attachments=d._getset("_attachments"),this.url=d._getset("_url"),this.scrapped=d._getset("_scrapped"),this.absenceInfo=d._getset("_absenceInfo")}return a.prototype._toMagisterStyle=function(){var a,b,c,e;return b={},b.Id=this._id,b.Start=d._helpers.toUtcString(this._begin),b.Einde=d._helpers.toUtcString(this._end),b.LesuurVan=this._beginBySchoolHour,b.LesuurTotMet=this._endBySchoolHour,b.DuurtHeleDag=this._fullDay,b.Omschrijving=this._description,b.Lokatie=this._location,b.Status=this._status,b.Type=this._type,b.WeergaveType=this._displayType,b.Inhoud=this._content,b.InfoType=this._infoType,b.Aantekening=this._notes,b.Afgerond=this._isDone,b.Lokalen=function(){var b,c,d,e;for(d=this._classRooms,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push({Naam:a});return e}.call(this),b.Docenten=function(){var a,b,d,e;for(d=this._teachers,e=[],a=0,b=d.length;b>a;a++)c=d[a],e.push(c._toMagisterStyle());return e}.call(this),b.Vakken=function(){var b,c,d,e;for(d=this._classes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push({Naam:a});return e}.call(this),b.Groepen=this._groups,b.OpdrachtId=this._appointmentId,b.Bijlagen=null!=(e=this._attachments)?e:[],b},a.prototype._makeStorable=function(){return e.omit(this,"_magisterObj")},a._convertRaw=function(a,b){var c,e,f,g,h;return e=new d.Appointment(a),e._id=b.Id,e._begin=new Date(Date.parse(b.Start)),e._end=new Date(Date.parse(b.Einde)),e._beginBySchoolHour=b.LesuurVan,e._endBySchoolHour=b.LesuurTotMet,e._fullDay=b.DuurtHeleDag,e._description=null!=(g=b.Omschrijving)?g:"",e._location=null!=(h=b.Lokatie)?h:"",e._status=b.Status,e._type=b.Type,e._displayType=b.WeergaveType,e._content=b.Inhoud,e._infoType=b.InfoType,e._notes=b.Aantekening,e._isDone=b.Afgerond,e._classes=null!=b.Vakken?function(){var a,d,e,f;for(e=b.Vakken,f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(c.Naam);return f}():[],e._teachers=null!=b.Docenten?function(){var c,e,g,h;for(g=b.Docenten,h=[],c=0,e=g.length;e>c;c++)f=g[c],h.push(d.Person._convertRaw(a,f));return h}():[],e._classRooms=null!=b.Lokalen?function(){var a,d,e,f;for(e=b.Lokalen,f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(c.Naam);return f}():[],e._groups=b.Groepen,e._appointmentId=b.OpdrachtId,e._attachments=b.Bijlagen,e._url=""+a._personUrl+"/afspraken/"+e._id,e._scrapped=0===b.Status,e},a._convertStored=function(a,b){var c;return c=e.extend(b,new d.Appointment(a)),c._magisterObj=a,c._begin=new Date(Date.parse(b._begin)),c._end=new Date(Date.parse(b._end)),c},a}(),d=null!=(g="undefined"!=typeof module&&null!==module?module.exports:void 0)?g:this,d.Assignment=function(){function b(a){this._magisterObj=a,this.id=d._getset("_id"),this.name=d._getset("_name"),this.description=d._getset("_description"),this["class"]=d._getset("_class"),this.deadline=d._getset("_deadline"),this.handedInOn=d._getset("_handedInOn"),this.files=d._getset("_files"),this.teachers=d._getset("_teachers"),this.grade=d._getset("_grade"),this.markedOn=d._getset("_markedOn"),this.handInAgain=d._getset("_handInAgain"),this.finished=d._getset("_finished"),this.canHandIn=d._getset("_canHandIn")}return b.prototype.versions=function(b){var c,e,f,g,h,i;for(e=d._helpers.asyncResultWaiter(this._versionIds.length,function(a){return b(null,a)}),h=this._versionIds,i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(this._magisterObj.http.get(""+this._magisterObj._personUrl+"/opdrachten/versie/"+c,{},function(c){return function(f,g){return null!=f?b(f,null):e(d.AssignmentVersion._convertRaw(c._magisterObj,c,a.parse(g.content)))}}(this)));return i},b._convertRaw=function(a,b){var c,e,f,g;return e=new d.Assignment(a),e._id=b.Id,e._name=b.Titel,e._description=b.Omschrijving,e._class=b.Vak,e._deadline=new Date(Date.parse(b.InleverenVoor)),e._handedInOn=new Date(Date.parse(b.IngeleverdOp)),e._files=function(){var e,f,g,h;for(g=b.Bijlagen,h=[],e=0,f=g.length;f>e;e++)c=g[e],h.push(d.File._convertRaw(a,void 0,c));return h}(),e._teachers=null!=b.Docenten?function(){var c,e,g,h;for(g=b.Docenten,h=[],c=0,e=g.length;e>c;c++)f=g[c],h.push(d.Person._convertRaw(a,f));return h}():void 0,e._versionIds=function(){var a,c,d,e;for(d=b.VersieNavigatieItems,e=[],a=0,c=d.length;c>a;a++)g=d[a],e.push(g.Id);return e}(),e._grade=b.Beoordeling,e._markedOn=new Date(Date.parse(b.BeoordeeldOp)),e._handInAgain=b.OpnieuwInleveren,e._finished=b.Afgesloten,e._canHandIn=b.MagInleveren,e},b}(),d.AssignmentVersion=function(){function a(a){this._magisterObj=a,this.id=d._getset("_id"),this["class"]=d._getset("_class"),this.state=d._getset("_state"),this.pupilMessage=d._getset("_pupilMessage"),this.teacherNotice=d._getset("_teacherNotice"),this.handedInFiles=d._getset("_handedInFiles"),this.feedbackFiles=d._getset("_feedbackFiles"),this.deadline=d._getset("_deadline"),this.handedInOn=d._getset("_handedInOn"),this.grade=d._getset("_grade"),this.markedOn=d._getset("_markedOn"),this.version=d._getset("_version"),this.tooLate=d._getset("_tooLate")}return a._convertRaw=function(a,b,c){var e,f;return f=new d.AssignmentVersion(a),f._id=c.Id,f._class=b._class,f._state=c.Status,f._pupilMessage=c.LeerlingOpmerking,f._teacherNotice=c.DocentOpmerking,f._handedInFiles=function(){var b,f,g,h;for(g=c.LeerlingBijlagen,h=[],b=0,f=g.length;f>b;b++)e=g[b],h.push(d.File._convertRaw(a,void 0,e));return h}(),f._feedbackFiles=function(){var b,f,g,h;for(g=c.FeedbackBijlagen,h=[],b=0,f=g.length;f>b;b++)e=g[b],h.push(d.File._convertRaw(a,void 0,e));return h}(),f._deadline=new Date(Date.parse(c.InleverenVoor)),f._handedInOn=new Date(Date.parse(c.IngeleverdOp)),f._grade=c.Beoordeling,f._markedOn=new Date(Date.parse(c.BeoordeeldOp)),f._version=c.VersieNummer,f._tooLate=c.IsTeLaat,f},a}(),d=null!=(l="undefined"!=typeof module&&null!==module?module.exports:void 0)?l:this,d.Class=function(){function a(a){this._magisterObj=a,this.id=d._getset("_id"),this.beginDate=d._getset("_beginDate"),this.endDate=d._getset("_endDate"),this.abbreviation=d._getset("_abbreviation"),this.description=d._getset("_description"),this.number=d._getset("_number"),this.teacher=d._getset("_teacher"),this.classExemption=d._getset("_classExemption")}return a._convertRaw=function(a,b){var c,e,f,g,h;return c=new d.Class(a),c._id=null!=(e=b.id)?e:b.Id,c._beginDate=new Date(Date.parse(b.begindatum)),c._endDate=new Date(Date.parse(b.einddatum)),c._abbreviation=null!=(f=b.afkorting)?f:b.Afkorting,c._description=null!=(g=b.omschrijving)?g:b.Omschrijving,c._number=null!=(h=b.volgnr)?h:b.Volgnr,c._teacher=d.Person._convertRaw(a,{Docentcode:b.docent}),c._classExemption=b.VakDispensatie||b.VakVrijstelling,c},a}(),d.Course=function(){function b(a){this._magisterObj=a,this.getOtherTutors=t(this.getOtherTutors,this),this.id=d._getset("_id"),this.begin=d._getset("_begin"),this.end=d._getset("_end"),this.schoolPeriod=d._getset("_schoolPeriod"),this.type=d._getset("_type"),this.group=d._getset("_group"),this.profile=d._getset("_profile"),this.alternativeProfile=d._getset("_alternativeProfile")}return b.prototype.classes=function(b){return this._magisterObj.http.get(this._classesUrl,{},function(c){return function(e,f){var g;return null!=e?b(e,null):b(null,function(){var b,c,e,h;for(e=a.parse(f.content),h=[],b=0,c=e.length;c>b;b++)g=e[b],h.push(d.Class._convertRaw(this._magisterObj,g));return h}.call(c))}}(this))},b.prototype.grades=function(){var b,c,f,g,h;if(h=e.filter(arguments,function(a){return e.isBoolean(a)}),f=h[0],c=h[1],g=h[2],b=e.find(arguments,function(a){return e.isFunction(a)}),null==b)throw new Error("Callback can't be null");return null==f&&(f=!0),null==c&&(c=!0),null==g&&(g=!1),this._magisterObj.http.get(g?this._gradesUrlPrefix:this._gradesUrl,{},function(h){return function(i,j){var k,l,m,n,o;if(null!=i)return b(i,null);for(j=a.parse(j.content).Items,k=d._helpers.asyncResultWaiter(j.length,function(a){var c,d,f,g,h,i,j,k;for(j=e.uniq(a,function(a){return a["class"]().id()}).map(function(a){return a["class"]()}),f=0,h=j.length;h>f;f++)for(c=j[f],k=e.filter(a,function(a){return a["class"]().id()===c.id()}),g=0,i=k.length;i>g;g++)d=k[g],d._class=c;return b(null,e.sortBy(a,function(a){return a.dateFilledIn()}))}),o=[],m=0,n=j.length;n>m;m++)l=j[m],o.push(function(a){var e,i,j;return e=d.Grade._convertRaw(h._magisterObj,a),e._columnUrl=h._columnUrlPrefix+(null!=(j=a.CijferKolom)?j.Id:void 0),i=d._helpers.asyncResultWaiter(2,function(){return k(e)}),f&&!g?h._magisterObj.getPersons(e.Docent,3,function(a,b){return null==a&&null!=b[0]&&(e._teacher=b[0]),i()}):i(),c&&!g?e.fillGrade(function(a,c){return null!=a?b(a,null):i()}):i()}(l));return o}}(this))},b.prototype.getPersonalTutor=function(b){if(null==b)throw new Error("Callback can't be null");return this._magisterObj.http.get(""+this._magisterObj._personUrl+"/aanmeldingen/"+this._id+"/mentor",{},function(c){return function(e,f){return null!=e?b(e,null):b(null,d.Person._convertRaw(c._magisterObj,a.parse(f.content)))}}(this))},b.prototype.getOtherTutors=function(b){if(null==b)throw new Error("Callback can't be null");return this._magisterObj.http.get(""+this._magisterObj._personUrl+"/aanmeldingen/"+this._id+"/mentor",{},function(c){return function(e,f){var g,h;return null!=e?b(e,null):(g=a.parse(f.content).items,b(null,function(){var a,b,c;for(c=[],a=0,b=g.length;b>a;a++)h=g[a],c.push(d.Person._convertRaw(this._magisterObj,h));return c}.call(c)))}}(this))},b._convertRaw=function(a,b){var c;return c=new d.Course(a),c._classesUrl=a._personUrl+("/aanmeldingen/"+b.Id+"/vakken"),c._gradesUrlPrefix=a._personUrl+("/aanmeldingen/"+b.Id+"/cijfers"),c._gradesUrl=c._gradesUrlPrefix+"/cijferoverzichtvooraanmelding?actievePerioden=false&alleenBerekendeKolommen=false&alleenPTAKolommen=false",c._columnUrlPrefix=c._gradesUrlPrefix+"/extracijferkolominfo/",c._id=b.Id,c._begin=new Date(Date.parse(b.Start)),c._end=new Date(Date.parse(b.Einde)),c._schoolPeriod=b.Lesperiode,c._type={id:b.Studie.Id,description:b.Studie.Omschrijving},c._group={id:b.Groep.Id,description:b.Groep.Omschrijving,locationId:b.Groep.LocatieId},c._profile=b.Profiel,c._alternativeProfile=b.Profiel2,c},b}(),d=null!=(m="undefined"!=typeof module&&null!==module?module.exports:void 0)?m:this,d.DigitalSchoolUtility=function(){function a(a){this._magisterObj=a,this.id=d._getset("_id"),this.type=d._getset("_type"),this.name=d._getset("_name"),this.publisher=d._getset("_publisher"),this.state=d._getset("_state"),this.begin=d._getset("_begin"),this.end=d._getset("_end"),this.EAN=d._getset("_EAN"),this.url=d._getset("_url"),this["class"]=d._getset("_class")}return a._convertRaw=function(a,b){var c;return c=new d.DigitalSchoolUtility(a),c._id=b.Id,c._type=b.MateriaalType,c._name=b.Titel,c._publisher=b.Uitgeverij,c._state=b.Status,c._begin=new Date(Date.parse(b.Start)),c._end=new Date(Date.parse(b.Eind)),c._EAN=Number(b.EAN),c._url=b.Url,c._class=b.Vak,c},a}(),d=null!=(n="undefined"!=typeof module&&null!==module?module.exports:void 0)?n:this,d.FileFolder=function(){function b(a){this._magisterObj=a,this.id=d._getset("_id"),this.name=d._getset("_name"),this.rights=d._getset("_rights"),this.parentId=d._getset("_parentId")}return b.prototype.files=function(b){return this._magisterObj.http.get(""+this._magisterObj._personUrl+"/bronnen?parentId="+this.id(),{},function(c){return function(e,f){var g,h,i,j,k,l;if(null!=e)return b(e,null);for(h=function(){var b,c,e,h;for(e=a.parse(f.content).Items,h=[],b=0,c=e.length;c>b;b++)g=e[b],h.push(d.File._convertRaw(this._magisterObj,this,g));return h}.call(c),i=d._helpers.asyncResultWaiter(h.length,function(a){return b(null,h)}),l=[],j=0,k=h.length;k>j;j++)g=h[j],l.push(function(a){return c._magisterObj.getPersons(a.GeplaatstDoor,function(b,c){return null==b&&0!==c.length&&(a._addedBy=c[0]),i()})}(g));return l}}(this))},b._convertRaw=function(a,b){var c;return c=new d.FileFolder(a),c._id=b.Id,c._name=b.Naam,c._rights=b.Privilege,c._parentId=b.ParentId,c},b}(),d.File=function(){function a(a){this._magisterObj=a,this.id=d._getset("_id"),this.type=d._getset("_type"),this.name=d._getset("_name",function(a){return function(b){return a._name=b,a._update()}}(this)),this.uri=d._getset("_uri"),this.size=d._getset("_size"),this.rights=d._getset("_rights"),this.mime=d._getset("_mime"),this.changedDate=d._getset("_changedDate"),this.creationDate=d._getset("_creationDate"),this.addedBy=d._getset("_addedBy"),this.fileBlobId=d._getset("_fileBlobId"),this.fileFolder=d._getset("_fileFolder",this.move),this.uniqueId=d._getset("_uniqueId")}return a.prototype.download=function(){var a,b,c,d,f;if(a=e.find(arguments,function(a){return e.isFunction(a)}),b=null!=(f=e.find(arguments,function(a){return e.isBoolean(a)}))?f:!0,d=null,"undefined"!=typeof Meteor&&null!==Meteor?Meteor.isServer:void 0)d=Npm.require("request");else{if(null==("undefined"!=typeof module&&null!==module?module.exports:void 0))return void("function"==typeof a&&a(new Error("`File.download` is only accessible from the server at the moment.\nYou can set a proxy yourself with something like iron:router serverside routes."),null));d=require("request")}return c=null!=b?e.isString(b)?b:this.name():void 0,d({url:this._downloadUrl,method:"GET",headers:this._magisterObj.http._cookieInserter(),encoding:null}).on("error",function(b){return"function"==typeof a?a(b,null):void 0}).on("response",function(b){return"function"==typeof a?a(null,""):void 0}).pipe(require("fs").createWriteStream(c))},a.prototype.move=function(a){return this._magisterObj.fileFolders(function(b){return function(c,f){if(null!=c)throw c;return e.isObject(a)||(a=e.find(f,function(b){return d._helpers.contains(b.name(),a,!0)||b.id()===a})),b._fileFolder=a,b._update()}}(this))},a.prototype.remove=function(){return this._magisterObj.http["delete"](""+this._magisterObj._personUrl+"/bronnen/"+this.id(),{},function(a,b){if(null!=a)throw a})},a.prototype._update=function(){return this._magisterObj.http.put(""+this._magisterObj._personUrl+"/bronnen/"+this.id(),this._toMagisterStyle(),{},function(){})},a.prototype._toMagisterStyle=function(){var a;return a={},a.Id=this._id,a.BronSoort=this._type,a.Naam=this._name,a.Uri=this._uri,a.Grootte=this._size,a.Privilege=this._rights,a.ContentType=this._mime,a.FileBlobId=this._fileBlobId,a.ParentId=this._fileFolder.id(),a.UniqueId=this._uniqueId,a},a._convertRaw=function(a,b,c){var f,g,h,i;return null!=c._addedBy?f=c._addedBy:(f=new d.Person(a,null,"",""),f._fullName=c.GeplaatstDoor),h=new d.File(a),h._id=c.Id,h._type=c.BronSoort,h._name=c.Naam,h._uri=c.Uri,h._size=c.Grootte,h._rights=c.Privilege,h._mime=c.ContentType,h._changedDate=new Date(Date.parse(c.GewijzigdOp)),h._creationDate=new Date(Date.parse(null!=(i=c.GemaaktOp)?i:c.Datum)),h._addedBy=f,h._fileBlobId=c.FileBlobId,h._fileFolder=b,h._uniqueId=c.UniqueId,g=e.find(c.Links,{Rel:"Contents"}),null==g&&(g=e.find(c.Links,{Rel:"Self"})),h._downloadUrl=a.magisterSchool.url+g.Href,h},a}(),d=null!=(o="undefined"!=typeof module&&null!==module?module.exports:void 0)?o:this,d.Grade=function(){function b(a){this._magisterObj=a,this.id=d._getset("_id"),this.grade=d._getset("_grade"),this.passed=d._getset("_passed"),this.dateFilledIn=d._getset("_dateFilledIn"),this.gradePeriod=d._getset("_gradePeriod"),this["class"]=d._getset("_class"),this.atLaterDate=d._getset("_atLaterDate"),this.exemption=d._getset("_exemption"),this.counts=d._getset("_counts"),this.type=d._getset("_type"),this.teacher=d._getset("_teacher"),this.classExemption=d._getset("_classExemption"),this.description=d._getset("_description"),this.weight=d._getset("_weight")}return b.prototype.fillGrade=function(b){return this._filled?"function"==typeof b?b(null,this):void 0:this._magisterObj.http.get(this._columnUrl,{},function(c){return function(d,e){return null!=d?"function"==typeof b?b(d,null):void 0:(e=a.parse(e.content),c._description=e.WerkInformatieOmschrijving,c._weight=e.Weging,c._type._level=e.KolomNiveau,c._type._description=e.KolomOmschrijving,c._filled=!0,"function"==typeof b?b(null,c):void 0)}}(this))},b._convertRaw=function(a,b){var c;return c=new d.Grade(a),c._id=b.CijferId,c._grade=b.CijferStr,c._passed=b.IsVoldoende,c._dateFilledIn=new Date(Date.parse(b.DatumIngevoerd)),c._gradePeriod={id:function(){return b.CijferPeriode.Id},name:function(){return b.CijferPeriode.Naam}},c._class={id:function(){return b.Vak.Id},abbreviation:function(){return b.Vak.Afkorting},description:function(){return b.Vak.Omschrijving}},c._atLaterDate=b.Inhalen,c._exemption=b.Vrijstelling,c._counts=b.TeltMee,null!=b.CijferKolom&&(c._type=d.GradeType._convertRaw(a,b.CijferKolom)),c._assignmentId=b.CijferKolomIdEloOpdracht,c._teacher=d.Person._convertRaw(a,{Docentcode:b.Docent}),c._teacher._type=3,c._classExemption=b.VakDispensatie||b.VakVrijstelling,c._description="",c._weight=0,c},b}(),d.GradeType=function(){function a(a){this._magisterObj=a,this.id=d._getset("_id"),this.name=d._getset("_name"),this.number=d._getset("_number"),this.header=d._getset("_header"),this.description=d._getset("_description"),this.type=d._getset("_type"),this.isAtLaterDate=d._getset("_isAtLaterDate"),this.isTeacher=d._getset("_isTeacher"),this.hasNestedTypes=d._getset("_hasNestedTypes"),this.isPTA=d._getset("_isPTA"),this.level=d._getset("_level")}return a._convertRaw=function(a,b){var c;return c=new d.GradeType(a),c._id=b.Id,c._name=b.KolomNaam,c._number=b.KolomNummer,c._header=b.KolomKop,c._type=b.KolomSoort,c._isAtLaterDate=b.IsHerkansingKolom,c._isTeacher=b.IsDocentKolom,c._hasNestedTypes=b.HeeftOndeliggendeKolommen,c._isPTA=b.IsPTAKolom,c._level=null,c._description="",c},a}(),d=null!=(p="undefined"!=typeof module&&null!==module?module.exports:void 0)?p:this,"undefined"!=typeof e&&null!==e||"undefined"==typeof require||null===require||(this._=e=require("lodash")),"undefined"!=typeof a&&null!==a||"undefined"==typeof require||null===require||(this.EJSON=a=require("ejson")),d.Magister=function(){function b(a,b,c,f){if(this.magisterSchool=a,this.username=b,this.password=c,this._keepLoggedIn=null!=f?f:!0,3!==arguments.length&&4!==arguments.length)throw new Error("Expected 3 or 4 arguments, got "+arguments.length);this._readyCallbacks=[],this.http=new d.MagisterHttp,e.isString(this.magisterSchool)?MagisterSchool.getSchools(this.magisterSchool,function(a){return function(b,c){if(null!=b)throw b;if(0===c.length)throw new Error("No school with the query "+a.magisterSchool+" found.");return a.magisterSchool=c[0],a.reLogin()}}(this)):this.reLogin()}return b.prototype.appointments=function(){var b,c,f,g,h,i,j,k;return b=e.find(arguments,function(a){return e.isFunction(a)}),f=null!=(j=e.find(arguments,function(a){return e.isBoolean(a)}))?j:!0,k=e.where(arguments,function(a){return e.isDate(a)}),g=k[0],h=k[1],e.isDate(h)||(h=g),g=d._helpers.date(g),h=d._helpers.date(h),this._forceReady(),c=d._helpers.urlDateConvert,i=""+this._personUrl+"/afspraken?tot="+c(h)+"&van="+c(g),this.http.get(i,{},function(i){return function(j,k){var l,m,n,o,p,q,r,s;if(null!=j)return b(j,null);if(k=a.parse(k.content),n=function(){var a,b,c,e;for(c=k.Items,e=[],a=0,b=c.length;b>a;a++)l=c[a],e.push(d.Appointment._convertRaw(this,l));return e}.call(i),m=[],o=d._helpers.asyncResultWaiter(3,function(a){var c,f,i;for(c=function(a){return a._absenceInfo=e.find(m,function(b){return b.appointmentId===a.id()})},f=0,i=n.length;i>f;f++)l=n[f],c(l);return e.remove(n,function(a){return d._helpers.date(a.begin())<g||d._helpers.date(a.end())>h}),b(null,e.sortBy(n,function(a){return a.begin()}))}),i.http.get(""+i._personUrl+"/roosterwijzigingen?tot="+c(h)+"&van="+c(g),{},function(b,c){var f,g,h,j,k;for(k=a.parse(c.content).Items,h=0,j=k.length;j>h;h++)g=k[h],f=d.Appointment._convertRaw(i,g),e.remove(n,function(a){return a.id()===f.id()}),n.push(f);return o()}),i.http.get(""+i._personUrl+"/absenties?tot="+c(h)+"&van="+c(g),{},function(b,c){var e,f,g;for(c=a.parse(c.content).Items,e=function(a){return m.push({id:a.Id,begin:new Date(Date.parse(a.Start)),end:new Date(Date.parse(a.Eind)),schoolHour:a.Lesuur,permitted:a.Geoorloofd,appointmentId:a.AfspraakId,description:d._helpers.trim(a.Omschrijving),type:a.VerantwoordingType,code:a.Code})},f=0,g=c.length;g>f;f++)l=c[f],e(l);return o()}),f){for(p=d._helpers.asyncResultWaiter(n.length,function(){return o()}),s=[],q=0,r=n.length;r>q;q++)l=n[q],s.push(function(a){var b,c;return b=null!=(c=a.teachers())?c:[],i.fillPersons(b,function(b,c){return a._teachers=c,p()},3)}(l));return s}return o()}}(this))},b.prototype.messageFolders=function(a,b){var c;return null==b&&(b=function(){}),this._forceReady(),c=e.isString(a)&&""!==a?e.where(this._messageFolders,function(b){return d._helpers.contains(b.name(),a,!0)}):this._messageFolders,b(null,c),c},b.prototype.inbox=function(a){return null==a&&(a=function(){}),this.messageFolders("postvak in",function(b,c){return a(null,c[0])})[0]},b.prototype.sentItems=function(a){return null==a&&(a=function(){}),this.messageFolders("verzonden items",function(b,c){return a(null,c[0])})[0]},b.prototype.bin=function(a){return null==a&&(a=function(){}),this.messageFolders("verwijderde items",function(b,c){return a(null,c[0])})[0]},b.prototype.alerts=function(a){return null==a&&(a=function(){}),this.messageFolders("mededelingen",function(b,c){return a(null,c[0])})[0]},b.prototype.courses=function(b){var c;return this._forceReady(),c=""+this._personUrl+"/aanmeldingen",this.http.get(c,{},function(c){return function(f,g){var h;return null!=f?b(f,null):(g=a.parse(g.content),b(null,e.sortBy(function(){var a,b,c,e;for(c=g.Items,e=[],a=0,b=c.length;b>a;a++)h=c[a],e.push(d.Course._convertRaw(this,h));return e}.call(c),function(a){return a.begin()}).reverse()))}}(this))},b.prototype.getLimitedCurrentCourseInfo=function(b){var c;return this._forceReady(),c=""+this._personUrl+"/opleidinggegevensprofiel",this.http.get(c,{},function(c,d){var e;return null!=c?b(c,null):(e=a.parse(d.content),b(null,{group:e.Klas,profile:pared.Profielen,pupilId:pared.StamNr,type:{year:+/\d+/.exec(Parsed.Studie)[0],schoolVariant:/[^\d\s]+/.exec(Parsed.Studie)[0]}}))})},b._cachedPersons={},b.prototype.getPersons=function(){var c,e,f,g,h;return this._forceReady(),e=d._helpers.trim(arguments[0]),c=2===arguments.length?arguments[1]:arguments[2],3===arguments.length&&(f=arguments[1]),null!=e&&null!=c&&e.length>=3?null==f?void this.getPersons(e,3,function(a){return function(b,f){var g;return null!=b?c(b,null):(g=f,a.getPersons(e,4,function(a,b){return null!=a?c(a,null):c(null,d._helpers.pushMore(b,g))}))}}(this)):(f=function(){switch(d.Person._convertType(f)){case 3:return"Personeel";case 4:return"Leerling";case 8:return"Project";default:return"Overig"}}(),g=""+this._personUrl+"/contactpersonen?contactPersoonType="+f+"&q="+e.replace(/\ +/g,"+"),null!=(h=b._cachedPersons[""+this._id+f+e])?c(null,h):this.http.get(g,{},function(g){return function(h,i){var j;return null!=h?c(h,null):(i=function(){var b,c,e,f;for(e=a.parse(i.content).Items,f=[],b=0,c=e.length;c>b;b++)j=e[b],f.push(d.Person._convertRaw(this,j));return f}.call(g),b._cachedPersons[""+g._id+f+e]=i,c(null,i))}}(this))):void c(null,[])},b.prototype.fillPersons=function(a,b,c){var f,g,h,i,j,k;if(this._forceReady(),e.isArray(a)){if(0===a.length)return void b(null,[]);for(g=d._helpers.asyncResultWaiter(a.length,function(a){return b(null,a)}),h=0,i=a.length;i>h;h++){f=a[h];try{this.getPersons(e.last(f.fullName().split(" ")),null!=(j=f._type)?j:c,function(a,b){var c;if(null!=a||null==b)throw a;return g(null!=(c=b[0])?c:f)})}catch(l){g(f)}}}else{if(!e.isObject(a))throw new Error("Expected persons to be an Array or an Object, got a(n) "+typeof a);try{this.getPersons(e.last(a.fullName().split(" ")),null!=(k=a._type)?k:c,function(c,d){var e;if(null!=c||null==d)throw c;return b(null,null!=(e=d[0])?e:a)})}catch(l){b(a)}}return void 0},b.prototype.composeAndSendMessage=function(){var a,b,c,f,g;return this._forceReady(),g=e.filter(arguments,function(a){return e.isString(a)}),f=g[0],a=g[1],c=e.last(arguments),2===arguments.length&&(a=""),b=new d.Message(this),b.subject(f),b.body(null!=a?a:""),b.addRecipient(c),b.send()},b.prototype.fileFolders=function(b){return this._forceReady(),this.http.get(""+this._personUrl+"/bronnen?soort=0",{},function(c){return function(e,f){var g;return null!=e?b(e,null):b(null,function(){var b,c,e,h;for(e=a.parse(f.content).Items,h=[],b=0,c=e.length;c>b;b++)g=e[b],h.push(d.FileFolder._convertRaw(this,g));return h}.call(c))}}(this))},b.prototype.studyGuides=function(b){var c,f,g;return this._forceReady(),f=null!=(g=e.find(arguments,function(a){return e.isBoolean(a)}))?g:!0,b=e.find(arguments,function(a){return e.isFunction(a)}),c=function(c){return function(f){return c.http.get(""+c._pupilUrl+"/studiewijzers?peildatum="+d._helpers.urlDateConvert(new Date),{},function(g,h){var i,j,k,l,m;if(null!=g)return b(g,null);for(h=function(){var b,c,e,f;for(e=a.parse(h.content).Items,f=[],b=0,c=e.length;c>b;b++)i=e[b],f.push(d.StudyGuide._convertRaw(this,i));return f}.call(c),k=function(a){return null!=f?a._class=e.find(f,function(b){return b.abbreviation()===a._class}):a._class=null},l=0,m=h.length;m>l;l++)j=h[l],k(j);return b(null,h)})}}(this),f?this.courses(function(a,b){return null!=b&&0!==b.length?b[0].classes(function(a,b){return null!=b&&0!==b.length?c(b):c()}):c()}):c()},b.prototype.assignments=function(){var b,c,f,g,h,i,j,k;return this._forceReady(),j=e.filter(arguments,function(a){return e.isNumber(a)}),b=j[0],i=j[1],k=e.filter(arguments,function(a){return e.isBoolean(a)}),h=k[0],g=k[1],c=e.find(arguments,function(a){return e.isFunction(a)}),null!=c?(null==h&&(h=!0),null==g&&(g=!0),null==b&&(b=50),null==i&&(i=0),f=function(f){return function(g){return f.http.get(""+f._personUrl+"/opdrachten?skip="+i+"&top="+b+"&status=alle",{},function(b,i){var j,k,l,m,n,o;if(null!=b)return c(b,null);for(i=function(){var b,c,d,e;for(d=a.parse(i.content).Items,e=[],b=0,c=d.length;c>b;b++)j=d[b],e.push(j.Id);return e}(),l=d._helpers.asyncResultWaiter(i.length,function(a){return c(null,a)}),o=[],m=0,n=i.length;n>m;m++)k=i[m],o.push(f.http.get(""+f._personUrl+"/opdrachten/"+k,{},function(b,c){var i,j,k;return i=d.Assignment._convertRaw(f,a.parse(c.content)),null!=g?i._class=e.find(g,function(a){return a.abbreviation()===i._class}):i._class=null,h?(j=null!=(k=i.teachers())?k:[],f.fillPersons(j,function(a,b){return i._teachers=b,l(i)},3)):l(i)}));return o})}}(this),g?this.courses(function(a,b){return null!=b&&0!==b.length?b[0].classes(function(a,b){return null!=b&&0!==b.length?f(b):f()}):f()}):f()):void 0},b.prototype.digitalSchoolUtilities=function(){var b,c,f,g,h,i;return this._forceReady(),f=null!=(i=e.find(arguments,function(a){return e.isBoolean(a)}))?i:!0,b=e.find(arguments,function(a){return e.isFunction(a)}),null!=b?(e.isObject(h)&&(h=h.id()),g=null!=h?""+this._personUrl+"/lesmateriaal?vakken="+h:""+this._personUrl+"/lesmateriaal",c=function(c){return function(f){return c.http.get(g,{},function(g,h){var i,j,k,l,m,n,o,p;if(null!=g)return b(g,null);if(j=function(){var b,c,e,f;for(e=a.parse(h.content).Items,f=[],b=0,c=e.length;c>b;b++)i=e[b],f.push(d.DigitalSchoolUtility._convertRaw(this,i));return f}.call(c),null!=f)for(k=function(a){return a._class=e.find(f,function(b){return b.abbreviation()===a._class.Afkorting&&b.description()===a._class.Omschrijving})},m=0,o=j.length;o>m;m++)i=j[m],k(i);else for(l=function(a){return a._class=d.Class._convertRaw(c,a._class)},n=0,p=j.length;p>n;n++)i=j[n],l(i);return b(null,j)})}}(this),f?this.courses(function(a,b){return null!=b&&0!==b.length?e.last(b).classes(function(a,b){return c(b)}):void 0}):c()):void 0},b.prototype.profileInfo=function(a){return this._forceReady(),"function"==typeof a&&a(null,this._profileInfo),this._profileInfo},b.prototype.children=function(b){return this.http.get(""+this._personUrl+"/kinderen",{},function(c){return function(f,g){var h,i,j,k,l,m,n;if(null!=f)return b(f,null);if(i=a.parse(g.content),null!=i.ExceptionId&&1===i.Reason)return void b(e.extend(i,{message:"User is not a parent."}),null);for(k=[],n=i.Items,l=0,m=n.length;m>l;l++)j=n[l],h=d.ProfileInfo._convertRaw(c,h),h._profilePicture=""+c.magisterSchool.url+"/api/personen/"+j.Id+"/foto",h.magister(function(b){var f;return f=e.clone(c),f._id=j.Id,f._personUrl=""+c.magisterSchool.url+"/api/personen/"+f._id,f._pupilUrl=""+c.magisterSchool.url+"/api/leerlingen/"+f._id,f._profileInfo=h,void c.http.get(""+f._personUrl+"/berichten/mappen",{},function(c,e){var g;return f._messageFolders=function(){var b,c,h,i;for(h=a.parse(e.content).Items,i=[],b=0,c=h.length;c>b;b++)g=h[b],i.push(d.MessageFolder._convertRaw(f,g));return i}(),b(f)})}),k.push(h);return b(null,k)}}(this))},b.prototype.ready=function(a){return e.isFunction(a)&&(this._ready||null!=this._magisterLoadError?e.bind(a,this)(this._magisterLoadError):this._readyCallbacks.push(e.bind(a,this))),this._ready===!0},b.prototype._forceReady=function(){if(!this._ready)throw new Error("Not done with logging in! (use Magister.ready(callback) to be sure that logging in is done)")},b.prototype._setReady=function(){var a,b,c,d;for(this._ready=!0,d=this._readyCallbacks,b=0,c=d.length;c>b;b++)(a=d[b])();return this._readyCallbacks=[]},b.prototype._setErrored=function(a){var b,c,d,e;for(this._magisterLoadError=a,e=this._readyCallbacks,c=0,d=e.length;d>c;c++)(b=e[c])(this._magisterLoadError);return this._readyCallbacks=[]},b.prototype._readyCallbacks=[],b.prototype._magisterLoadError=null,b.prototype.reLogin=function(){var b;return this._ready=!1,this._magisterLoadError=null,b=""+this.magisterSchool.url+"/api/sessie",this.http.post(b,{Gebruikersnaam:this.username,Wachtwoord:this.password,GebruikersnaamOnthouden:!0,IngelogdBlijven:this._keepLoggedIn},{headers:{"Content-Type":"application/json;charset=UTF-8"}},function(b){return function(c,e){return null!=c?b._setErrored(c):null!=e.content?b._setErrored(e.content):(b._sessionId=/[a-z\d-]+/.exec(e.headers["set-cookie"][0])[0],b.http._cookie="SESSION_ID="+b._sessionId+"; M6UserName="+b.username,b.http.get(""+b.magisterSchool.url+"/api/account",{},function(c,e){return null!=c?void b._setErrored(c):(e=a.parse(e.content),b._group=e.Groep[0],b._id=e.Persoon.Id,b._personUrl=""+b.magisterSchool.url+"/api/personen/"+b._id,b._pupilUrl=""+b.magisterSchool.url+"/api/leerlingen/"+b._id,b._profileInfo=d.ProfileInfo._convertRaw(b,e),b.http.get(""+b._personUrl+"/berichten/mappen",{},function(c,e){var f;return null!=c?void b._setErrored(c):(b._messageFolders=function(){var b,c,g,h;for(g=a.parse(e.content).Items,h=[],b=0,c=g.length;c>b;b++)f=g[b],h.push(d.MessageFolder._convertRaw(this,f));return h}.call(b),b._setReady())}))}))}}(this))},b}(),d=null!=(q="undefined"!=typeof module&&null!==module?module.exports:void 0)?q:this,
c=function(a,b){switch(b){case 1:return a.inbox();case 2:return a.sentItems();case 3:return a.bin();case 4:return a.alerts();default:return d.MessageFolder._convertRaw({Id:b})}},d.Message=function(){function a(a){if(this._magisterObj=a,null==this._magisterObj)throw new Error("Magister instance is null!");this._magisterObj._forceReady(),this._canSend=!0,this._sender=this._magisterObj.profileInfo(),this._recipients=[],this._sendDate=new Date,this._isRead=!1,this._type=1,this._subject="",this._body="",this.id=d._getset("_id"),this.body=d._getset("_body",function(a){return function(b){return a._body=b.replace("\n","<br>")}}(this),function(a){return null!=a?a.replace(/<br ?\/?>/g,"\n").replace(/(<[^>]*>)|(&nbsp;)/g,""):""}),this.attachments=d._getset("_attachments"),this.messageFolder=d._getset("_folderId",function(a){return function(b){return a.move(b)}}(this),function(a){return function(b){return c(a._magisterObj,b)}}(this)),this.subject=d._getset("_subject",function(a){return function(b){return a._subject=b}}(this)),this.sender=d._getset("_sender"),this.recipients=d._getset("_recipients"),this.sendDate=d._getset("_sendDate"),this.begin=d._getset("_begin"),this.end=d._getset("_end"),this.isRead=d._getset("_isRead",function(a){return function(b){return a._isRead===b||a._canSend?void 0:(a._isRead=b,a._update())}}(this)),this.state=d._getset("_state"),this.isFlagged=d._getset("_isFlagged"),this.type=d._getset("_type")}return a.prototype._tasks=0,a.prototype._sendAfterFinished=!1,a.prototype._working=function(){return 0!==this._tasks},a.prototype._tickDown=function(){return 0===--this._tasks&&this._sendAfterFinished?this.send():void 0},a.prototype._reset=function(){return this._tasks=0,this._sendAfterFinished=!1},a.prototype.addRecipient=function(a,b){var c,d,f;if(e.isString(a))this._tasks++,this._magisterObj.getPersons(a,b,function(c){return function(d,e){if(0!==e.length)return c.recipients().push(e[0]),c._tickDown();throw null!=b?(c._reset(),new Error("Couldn't find a person with the type: \""+b+'" and with the query: "'+a+'"')):(c._reset(),new Error("Couldn't find a person with the query: \""+a+'"'))}}(this));else if(e.isArray(a))for(d=0,f=a.length;f>d;d++)c=a[d],this.addRecipient(c,b);else{if(!e.isObject(a))throw this._reset(),new Error("Expected recipient to be a String or an Object, got a(n) "+typeof a);this.recipients().push(a)}return void 0},a.prototype.createReplyMessage=function(a){var b,c;return c=0!==this.subject().indexOf("RE: ")?"RE: "+this.subject():c(),b=new d.Message(this._magisterObj),b._sender=this._sender,b._folderId=this._folderId,b._isFlagged=this._isFlagged,b._id=this._id,b._body=(null!=a?""+a+"<br><br>---------------<br>":"")+("<b>Van:</b> "+this.sender().description()+"<br><b>Verzonden:</b> "+this.sendDate().toLocaleString()+"<br><b>Aan:</b> "+this.recipients().map(function(a){return a.fullName()}).join(", ")+"<br><b>Onderwerp:</b> "+this.subject()+'<br><br>"'+this.body()+'"<br><br>'),b._subject=c,b._recipients=[this.sender()],b},a.prototype.createReplyToAllMessage=function(a){var b,c;return c=0!==this.subject().indexOf("RE: ")?"RE: "+this.subject():c(),b=new d.Message(this._magisterObj),b._sender=this._sender,b._folderId=this._folderId,b._isFlagged=this._isFlagged,b._id=this._id,b._body=(null!=a?""+a+"<br><br>---------------<br>":"")+("<b>Van:</b> "+this.sender().description()+"<br><b>Verzonden:</b> "+this.sendDate().toLocaleString()+"<br><b>Aan:</b> "+this.recipients().map(function(a){return a.fullName()}).join(", ")+"<br><b>Onderwerp:</b> "+this.subject()+'<br><br>"'+this.body()+'"<br><br>'),b._subject=c,b._recipients=e.reject(this.recipients(),function(a){return a.id()===this._magisterObj.profileInfo().id()}).concat([this.sender()]),b},a.prototype.createForwardMessage=function(a){var b,c;return c=0!==this.subject().indexOf("FW: ")?"FW: "+this.subject():c(),b=new d.Message(this._magisterObj),b._sender=this._sender,b._folderId=this._folderId,b._isFlagged=this._isFlagged,b._id=this._id,b._body=(null!=a?""+a+"<br><br>---------------<br>":"")+("<b>Van:</b> "+this.sender().description()+"<br><b>Verzonden:</b> "+this.sendDate().toLocaleString()+"<br><b>Aan:</b> "+this.recipients().map(function(a){return a.fullName()}).join(", ")+"<br><b>Onderwerp:</b> "+this.subject()+'<br><br>"'+this.body()+'"<br><br>'),b._subject=c,b},a.prototype.send=function(){if(this._working())return this._sendAfterFinished=!0,!1;if(!this._canSend)throw new Error("This message is marked as unsendable");if(null==this.recipients()||null==this.sender())throw new Error("Sender and/or recipients cannot be null");if(e.isEmpty(this.subject()))throw new Error("Subject cannot be null or empty");return null==this.body()&&this.body(""),this._magisterObj.http.post(""+this._magisterObj._personUrl+"/berichten",this._toMagisterStyle(),{},function(a,b){if(null!=a)throw a}),!0},a.prototype.move=function(a){if(e.isObject(a)&&(a=a.id()),!e.isNumber(a))throw new Error("Could not resolve MessageFolder form the given destination.");return this._folderId!==a?(this._folderId=a,this._update()):void 0},a.prototype.remove=function(){return this._magisterObj.http["delete"](""+this._magisterObj._personUrl+"/berichten/"+this.id(),{},function(a,b){if(null!=a)throw a})},a.prototype._update=function(){return this._magisterObj.http.put(""+this._magisterObj._personUrl+"/berichten/"+this.id()+"?berichtSoort="+this.type(),this._toMagisterStyle(),{},function(){})},a.prototype._toMagisterStyle=function(){var a,b;return a={},a.Id=this._id,a.Inhoud=this._body,a.MapId=this._folderId,a.Onderwerp=this._subject,a.Ontvangers=function(){var a,c,d,e;for(d=this._recipients,e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b._toMagisterStyle());return e}.call(this),a.VerstuurdOp=this._sendDate,a.Begin=this._begin,a.Einde=this._end,a.IsGelezen=this._isRead,a.Status=this._state,a.HeeftPrioriteit=this._isFlagged,a.Soort=this._type,a},a._convertRaw=function(a,b){var c,e,f;return e=new d.Message(a),e._id=b.Id,e._body=null!=(f=b.Inhoud)?f:"",e._folderId=b.MapId,e._subject=b.Onderwerp,e._sender=d.Person._convertRaw(a,b.Afzender),e._recipients=function(){var e,f,g,h,i;for(g=null!=(h=b.Ontvangers)?h:[],i=[],e=0,f=g.length;f>e;e++)c=g[e],i.push(d.Person._convertRaw(a,c));return i}(),e._sendDate=new Date(Date.parse(b.VerstuurdOp)),e._begin=new Date(Date.parse(b.Begin)),e._end=new Date(Date.parse(b.Einde)),e._isRead=b.IsGelezen,e._state=b.Status,e._isFlagged=b.HeeftPrioriteit,e._type=b.Soort,e._canSend=!1,e},a}(),d=null!=(r="undefined"!=typeof module&&null!==module?module.exports:void 0)?r:this,b=function(a){var b,c,f;return b="",e.any(["unread","ongelezen"],function(b){return d._helpers.contains(a,b,!0)})?b+="&gelezen=false":e.any(["read","gelezen"],function(b){return d._helpers.contains(a,b,!0)})&&(b+="&gelezen=true"),null!=(f=/(skip \d+)|(sla \d+ over)/gi.exec(a))&&(c=/\d+/.exec(f[0])[0],b+="&skip="+c),b},d.MessageFolder=function(){function c(a){this._magisterObj=a,this.name=d._getset("_name"),this.unreadMessagesCount=d._getset("_unreadMessagesCount"),this.id=d._getset("_id"),this.parentId=d._getset("_parentId")}return c.prototype.messages=function(){var c,f,g,h,i,j,k,l;if(g=null!=(l=e.find(arguments,function(a){return e.isNumber(a)}))?l:10,h=null!=(j=e.find(arguments,function(a){return e.isString(a)}))?j:"",f=null!=(k=e.find(arguments,function(a){return e.isBoolean(a)}))?k:!0,c=e.find(arguments,function(a){return e.isFunction(a)}),null==c)throw new Error("Callback is null");return 0===g?void c(null,[]):(i=""+this._magisterObj._personUrl+"/berichten?mapId="+this.id()+"&top="+g+b(h),this._magisterObj.http.get(i,{},function(b){return function(g,h){var j,k,l,m,n,o;if(null!=g)return c(g,null);for(k=function(){var b,c,e,f;for(e=a.parse(h.content).Items,f=[],b=0,c=e.length;c>b;b++)j=e[b],f.push(d.Message._convertRaw(this._magisterObj,j));return f}.call(b),l=d._helpers.asyncResultWaiter(k.length,function(a){return c(null,e.sortBy(a,function(a){return a.sendDate()}).reverse())}),o=[],m=0,n=k.length;n>m;m++)j=k[m],o.push(function(c){return i=""+b._magisterObj._personUrl+"/berichten/"+c.id()+"?berichtSoort="+c.type(),b._magisterObj.http.get(i,{},function(e,g){var h,i,j;return i=a.parse(g.content),c._body=i.Inhoud,c._attachments=function(){var a,b,c,e,f;for(e=null!=(c=i.Bijlagen)?c:[],f=[],a=0,b=e.length;b>a;a++)h=e[a],f.push(d.File._convertRaw(this._magisterObj,void 0,h));return f}.call(b),f?(j=d._helpers.asyncResultWaiter(c.recipients().length+1,function(){return l(c)}),b._magisterObj.fillPersons(c.recipients(),function(a,b){return c._recipients=b,j(b)}),b._magisterObj.fillPersons(c.sender(),function(a,b){return c._sender=b,j(b)})):l(c)})}(j));return o}}(this)))},c.prototype.messageFolders=function(b,c){var f;return c=null!=(f=null!=c?c:b)?f:function(){},null!=c?this._magisterObj.http.get(""+this._magisterObj._personUrl+"/berichten/mappen?parentId="+this.id(),{},function(f){return function(g,h){var i,j;return null!=g?c(g,null):(j=function(){var b,c,e,f;for(e=a.parse(h.content).Items,f=[],b=0,c=e.length;c>b;b++)i=e[b],f.push(d.MessageFolder._convertRaw(this._magisterObj,i));return f}.call(f),h=e.isString(b)&&""!==b?e.where(j,function(a){return Helpers.contains(a.name(),b,!0)}):j,c(null,h))}}(this)):void 0},c.prototype.removeAllMessages=function(){return this._magisterObj.http["delete"](""+this._magisterObj._personUrl+"/berichten/map/"+this.id(),{},function(a,b){if(null!=a)throw a})},c.prototype.createMessageFolder=function(b,c){var e;return null==c&&(c=function(){}),e={naam:b,parentId:this.id(),persoonId:this._magisterObj._id},this._magisterObj.http.post(""+this._magisterObj._personUrl+"/berichten/mappen",e,{},function(b){return function(e,f){return null!=e?c(e,null):c(null,d.MessageFolder._convertRaw(b._magisterObj,a.parse(f.content)))}}(this))},c.prototype.remove=function(){return this._magisterObj.http.put(""+this._magisterObj._personUrl+"/berichten/mappen",this._toMagisterStyle(),{},function(a,b){if(null!=a)throw a})},c.prototype._toMagisterStyle=function(){var a;return a={},a.Naam=this._name,a.OngelezenBerichten=this._unreadMessagesCount,a.Id=this._id,a.ParentId=this._parentId,a},c._convertRaw=function(a,b){var c;return c=new d.MessageFolder(a),c._name=b.Naam,c._unreadMessagesCount=b.OngelezenBerichten,c._id=b.Id,c._parentId=b.ParentId,c},c}(),d=null!=(s="undefined"!=typeof module&&null!==module?module.exports:void 0)?s:this,d.Person=function(){function a(b,c,f,g){if(this._magisterObj=b,this._type=c,this._firstName=f,this._lastName=g,null!=this._firstName&&null!=this._lastName&&e.any(e.toArray(arguments).slice(2),function(a){return null!=a&&!e.isString(a)}))throw new Error("One or more arguments is not a string.");this.id=d._getset("_id"),this.type=d._getset("_type",function(b){return function(c){return b._type=a._convertType(c,!0)}}(this),a._convertType),this.firstName=d._getset("_firstName"),this.lastName=d._getset("_lastName"),this.namePrefix=d._getset("_namePrefix"),this.fullName=d._getset("_fullName"),this.description=d._getset("_description"),this.group=d._getset("_group"),this.teacherCode=d._getset("_teacherCode"),this.emailAddress=d._getset("_emailAddress")}return a.prototype._toMagisterStyle=function(){var a;return a={},a.Id=this._id,a.Type=this._type,a.Voornaam=this._firstName,a.Achternaam=this._lastName,a.Tussenvoegsel=this._namePrefix,a.Naam=this._fullName,a.Omschrijving=this._description,a.Groep=this._group,a.Docentcode=this._teacherCode,a.Emailadres=this._emailAddress,a},a._convertRaw=function(a,b){var c,e,f;return c=new d.Person(a,b.Type,b.Voornaam,b.Achternaam),c._id=b.Id,c._namePrefix=b.Tussenvoegsel,c._fullName=b.Naam,c._description=null!=(e=null!=(f=b.Omschrijving)?f:b.Naam)?e:b.naam,c._group=b.Groep,c._teacherCode=b.Docentcode,c._emailAddress=b.Emailadres,c},a._convertType=function(a,b){if(null==b&&(b=!0),b){if(e.isNumber(a)){if(!e.contains([1,3,4,8],a))throw new Error('Invalid value: "'+a+'".');return a}switch(a.toLowerCase()){case"group":return 1;case"teacher":return 3;case"pupil":return 4;case"project":return 8;default:throw new Error('Invalid value: "'+a+'".')}}else switch(a){case 1:return"group";case 3:return"teacher";case 4:return"pupil";case 8:return"project";default:return void 0}},a}(),d=null!=(h="undefined"!=typeof module&&null!==module?module.exports:void 0)?h:this,d.ProfileInfo=function(){function b(a,b,c,e){this._magisterObj=a,this._firstName=b,this._lastName=c,this._birthDate=e,this.id=d._getset("_id"),this.officialFirstNames=d._getset("_officialFirstNames"),this.initials=d._getset("_initials"),this.namePrefix=d._getset("_namePrefix"),this.officialSurname=d._getset("_officialSurname"),this.birthSurname=d._getset("_birthSurname"),this.birthNamePrefix=d._getset("_birthNamePrefix"),this.useBirthname=d._getset("_useBirthname"),this.firstName=d._getset("_firstName"),this.lastName=d._getset("_lastName"),this.fullName=function(){return this.firstName()+" "+this.lastName()},this.birthDate=d._getset("_birthDate")}return b.prototype.profilePicture=function(a,b,c){return null==a&&(a=640),null==b&&(b=640),null==c&&(c=!1),""+this._magisterObj._personUrl+"/foto?width="+a+"&height="+b+"&crop="+c},b.prototype.detailedInfo=function(b){var c;if(null==b)throw new Error("`callback` is required.");return c=d._helpers.asyncResultWaiter(2,function(a){return b(null,d.DetailedProfileInfo._convertRaw(e.extend(a[0],a[1])))}),this._magisterObj.http.get(""+this._magisterObj._personUrl+"/profiel",{},function(d,e){return null!=d?b(d,null):c(a.parse(e.content))}),this._magisterObj.http.get(""+this._magisterObj._personUrl+"/adresprofiel",{},function(d,e){return null!=d?b(d,null):c(a.parse(e.content))})},b._convertRaw=function(a,b){var c;return b=b.Persoon,c=new d.ProfileInfo(a,b.Roepnaam,b.Achternaam,new Date(Date.parse(b.Geboortedatum))),c._id=b.Id,c._officialFirstNames=b.OfficieleVoornamen,c._initials=b.Voorletters,c._namePrefix=b.Tussenvoegsel,c._officialSurname=b.OfficieleAchternaam,c._birthSurname=b.GeboorteAchternaam,c._birthNamePrefix=b.GeboortenaamTussenvoegsel,c._useBirthname=b.GebruikGeboortenaam,c},b}(),d.DetailedProfileInfo=function(){function a(){this.redirectMagisterMessages=d._getset("_redirectMagisterMessages"),this.emailAddress=d._getset("_emailAddress"),this.mobileNumber=d._getset("_mobileNumber"),this.postalCode=d._getset("_postalCode"),this.street=d._getset("_street"),this.houseNumber=d._getset("_houseNumber"),this.suffix=d._getset("_suffix"),this.city=d._getset("_city")}return a._convertRaw=function(){var a,b;return b=arguments[2===arguments.length?1:0],a=new d.DetailedProfileInfo,a._redirectMagisterMessages=b.EloBerichtenDoorsturen,a._emailAddress=b.EmailAdres,a._mobileNumber=b.Mobiel,a._postalCode=b.Postcode,a._street=b.Straatnaam,a._houseNumber=b.Huisnummer,a._suffix=b.Toevoeging,a._city=b.Woonplaats,a},a}(),d=null!=(i="undefined"!=typeof module&&null!==module?module.exports:void 0)?i:this,d.MagisterSchool=function(){function b(a,b,c){this.id=a,this.name=b,this.url=c}return b.getSchools=function(b,c){return null==b||d._helpers.trim(b).length<3?void c(null,[]):(b=b.replace(/\d/g,"").trim(),(new MagisterHttp).get("https://mijn.magister.net/api/schools?filter="+b,{},function(b){return function(d,e){var f;return null!=d?c(d,null):c(null,function(){var b,c,d,g;for(d=a.parse(e.content),g=[],b=0,c=d.length;c>b;b++)f=d[b],g.push(this._convertRaw(f));return g}.call(b))}}(this)))},b._convertRaw=function(a){return new d.MagisterSchool(a.Id,a.Name,a.Url)},b}(),d=null!=(j="undefined"!=typeof module&&null!==module?module.exports:void 0)?j:this,d.StudyGuide=function(){function b(a){this._magisterObj=a,this.id=d._getset("_id"),this.from=d._getset("_from"),this.to=d._getset("_to"),this.classCodes=d._getset("_classCodes"),this.name=d._getset("_name"),this.archived=d._getset("_archived"),this["class"]=d._getset("_class")}return b.prototype.parts=function(b){return null!=b?this._magisterObj.http.get(""+this._magisterObj._pupilUrl+"/studiewijzers/"+this.id(),{},function(c){return function(e,f){var g,h,i,j,k,l,m;if(null!=e)return b(e,null);for(f=a.parse(f.content).Onderdelen.Items,i=d._helpers.asyncResultWaiter(f.length,function(a){return b(null,a)}),l=function(){var a,b,c;for(c=[],a=0,b=f.length;b>a;a++)h=f[a],c.push(h.Id);return c}(),m=[],j=0,k=l.length;k>j;j++)g=l[j],m.push(c._magisterObj.http.get(""+c._magisterObj._pupilUrl+"/studiewijzers/"+c.id()+"/onderdelen/"+g,{},function(b,e){return i(d.StudyGuidePart._convertRaw(c._magisterObj,a.parse(e.content)))}));return m}}(this)):void 0},b._convertRaw=function(a,b){var c;return c=new d.StudyGuide(a),c._id=b.Id,c._from=new Date(Date.parse(b.Van)),c._to=new Date(Date.parse(b.TotEnMet)),c._classCodes=b.VakCodes,c._class=b.VakCodes[0],c._name=b.Titel,c._archived=b.InLeerlingArchief,c},b}(),d.StudyGuidePart=function(){function a(a){this._magisterObj=a,this.id=d._getset("_id"),this.from=d._getset("_from"),this.to=d._getset("_to"),this.name=d._getset("_name"),this.description=d._getset("_description",null,function(a){return null!=a?a.replace(/<br ?\/?>/g,"\n").replace(/(<[^>]*>)|(&nbsp;)/g,"").replace(/&amp;/gi,"&"):a}),this.visible=d._getset("_visible"),this.number=d._getset("_number"),this.files=d._getset("_files")}return a._convertRaw=function(a,b){var c,e;return e=new d.StudyGuidePart(a),e._id=b.Id,e._from=new Date(Date.parse(b.Van)),e._to=new Date(Date.parse(b.TotEnMet)),e._name=b.Titel,e._description=b.Omschrijving,e._visible=b.IsZichtbaar,e._number=b.Volgnummer,e._files=function(){var e,f,g,h;for(g=b.Bronnen,h=[],e=0,f=g.length;f>e;e++)c=g[e],h.push(d.File._convertRaw(a,void 0,c));return h}(),e},a}(),d=null!=(k="undefined"!=typeof module&&null!==module?module.exports:void 0)?k:this,d._helpers=function(){function a(){}return a.addZero=function(a){return 10>a?"0"+a:a.toString()},a.toUtcString=function(b){return""+a.addZero(b.getUTCFullYear())+"-"+a.addZero(b.getMonth()+1)+"-"+a.addZero(b.getDate())+"T"+a.addZero(b.getHours())+":"+a.addZero(b.getMinutes())+":"+a.addZero(b.getSeconds())+".0000000Z"},a.pushMore=function(a,b){return[].push.apply(a,b),a},a.contains=function(a,b,c){return null==c&&(c=!1),c?a.toUpperCase().indexOf(b.toUpperCase())>=0:a.indexOf(b)>=0},a.asyncResultWaiter=function(b,c){var d,f;return 0===b&&c([]),f=[],d=b,function(b){return e.isArray(b)?(a.pushMore(f,b),d-=b.length):(f.push(b),d--),0===d?c(f):void 0}},a.trim=function(a){return null==a||0===a.length?"":e.isFunction(String.prototype.trim)?a.trim():a.replace(/^\s+|\s+$/g,"")},a.saveFile=function(a,b,c){try{return saveAs(new Blob([a],{type:b}),c)}catch(d){}},a.urlDateConvert=function(b){return""+b.getUTCFullYear()+"-"+a.addZero(b.getMonth()+1)+"-"+a.addZero(b.getDate())},a.date=function(a){return new Date(a.getUTCFullYear(),a.getMonth(),a.getDate())},a}(),d._getset=function(a,b,c){return function(d){if(null!=d){if(!e.isFunction(b))throw new Error("Changes on this property aren't allowed");b(d,!0)}return e.isFunction(c)?c(this[a],!1):this[a]}},null==Array.isArray&&(e.isArray=jQuery.isArray=Array.isArray=function(a){return Object.prototype.toString.call("[object Array]"===a)}),function(){function a(a,b,c){c=(c||0)-1;for(var d=a?a.length:0;++c<d;)if(a[c]===b)return c;return-1}function b(b,c){var d=typeof c;if(b=b.l,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:r+c;return b=(b=b[d])&&b[e],"object"==d?b&&-1<a(b,c)?0:-1:b?0:-1}function c(a){var b=this.l,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:r+a,b=b[c]||(b[c]={});"object"==c?(b[d]||(b[d]=[])).push(a):b[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.m,d=b.m,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.n-b.n}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;for(e=i(),e["false"]=e["null"]=e["true"]=e.undefined=!1,f=i(),f.k=a,f.l=e,f.push=c;++b<d;)f.push(a[b]);return f}function g(a){return"\\"+U[a]}function h(){return o.pop()||[]}function i(){return p.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function j(a){a.length=0,o.length<t&&o.push(a)}function k(a){var b=a.l;b&&k(b),a.k=a.l=a.m=a.object=a.number=a.string=a.o=null,p.length<t&&p.push(a)}function l(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);var d=-1;c=c-b||0;for(var e=Array(0>c?0:c);++d<c;)e[d]=a[b+d];return e}function m(c){function o(a,b,c){if(!a||!T[typeof a])return a;b=b&&"undefined"==typeof c?b:ba(b,c,3);for(var d=-1,e=T[typeof a]&&Kb(a),f=e?e.length:0;++d<f&&(c=e[d],!1!==b(a[c],c,a)););return a}function p(a,b,c){var d;if(!a||!T[typeof a])return a;b=b&&"undefined"==typeof c?b:ba(b,c,3);for(d in a)if(!1===b(a[d],d,a))break;return a}function t(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if((e=g[h])&&T[typeof e])for(var j=-1,k=T[typeof e]&&Kb(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f}function U(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=ba(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if((e=g[h])&&T[typeof e])for(var k=-1,l=T[typeof e]&&Kb(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f}function W(a){var b,c=[];if(!a||!T[typeof a])return c;for(b in a)rb.call(a,b)&&c.push(b);return c}function X(a){return a&&"object"==typeof a&&!Jb(a)&&rb.call(a,"__wrapped__")?a:new Y(a)}function Y(a,b){this.__chain__=!!b,this.__wrapped__=a}function Z(a){function b(){if(d){var a=l(d);sb.apply(a,arguments)}if(this instanceof b){var f=aa(c.prototype),a=c.apply(f,a||arguments);return va(a)?a:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Ib(b,a),b}function _(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}if(!va(a))return a;var g=kb.call(a);if(!Q[g])return a;var i=Gb[g];switch(g){case J:case K:return new i(+a);case M:case P:return new i(a);case O:return f=i(a.source,z.exec(a)),f.lastIndex=a.lastIndex,f}if(g=Jb(a),b){var k=!d;d||(d=h()),e||(e=h());for(var m=d.length;m--;)if(d[m]==a)return e[m];f=g?i(a.length):{}}else f=g?l(a):U({},a);return g&&(rb.call(a,"index")&&(f.index=a.index),rb.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(g?Da:o)(a,function(a,g){f[g]=_(a,b,c,d,e)}),k&&(j(d),j(e)),f):f}function aa(a){return va(a)?xb(a):{}}function ba(a,b,c){if("function"!=typeof a)return Ua;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Hb.funcNames&&(d=!a.name),d=d||!Hb.funcDecomp,!d)){var e=pb.call(a);Hb.funcNames||(d=!A.test(e)),d||(d=E.test(e),Ib(a,d))}if(!1===d||!0!==d&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Sa(a,b)}function ca(a){function b(){var a=i?g:this;if(e){var o=l(e);sb.apply(o,arguments)}return(f||k)&&(o||(o=l(arguments)),f&&sb.apply(o,f),k&&o.length<h)?(d|=16,ca([c,m?d:-4&d,o,null,g,h])):(o||(o=arguments),j&&(c=a[n]),this instanceof b?(a=aa(c.prototype),o=c.apply(a,o),va(o)?o:a):c.apply(a,o))}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,m=8&d,n=c;return Ib(b,a),b}function da(c,d){var e=-1,g=ma(),h=c?c.length:0,i=h>=s&&g===a,j=[];if(i){var l=f(d);l?(g=b,d=l):i=!1}for(;++e<h;)l=c[e],0>g(d,l)&&j.push(l);return i&&k(d),j}function ea(a,b,c,d){d=(d||0)-1;for(var e=a?a.length:0,f=[];++d<e;){var g=a[d];if(g&&"object"==typeof g&&"number"==typeof g.length&&(Jb(g)||qa(g))){b||(g=ea(g,b,c));var h=-1,i=g.length,j=f.length;for(f.length+=i;++h<i;)f[j++]=g[h]}else c||f.push(g)}return f}function fa(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;if(a===a&&!(a&&T[typeof a]||b&&T[typeof b]))return!1;if(null==a||null==b)return a===b;var i=kb.call(a),k=kb.call(b);if(i==H&&(i=N),k==H&&(k=N),i!=k)return!1;switch(i){case J:case K:return+a==+b;case M:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case O:case P:return a==fb(b)}if(k=i==I,!k){var l=rb.call(a,"__wrapped__"),m=rb.call(b,"__wrapped__");if(l||m)return fa(l?a.__wrapped__:a,m?b.__wrapped__:b,c,d,e,f);if(i!=N)return!1;if(i=a.constructor,l=b.constructor,i!=l&&!(ua(i)&&i instanceof i&&ua(l)&&l instanceof l)&&"constructor"in a&&"constructor"in b)return!1}for(i=!e,e||(e=h()),f||(f=h()),l=e.length;l--;)if(e[l]==a)return f[l]==b;var n=0,g=!0;if(e.push(a),f.push(b),k){if(l=a.length,n=b.length,(g=n==l)||d)for(;n--;)if(k=l,m=b[n],d)for(;k--&&!(g=fa(a[k],m,c,d,e,f)););else if(!(g=fa(a[n],m,c,d,e,f)))break}else p(b,function(b,h,i){return rb.call(i,h)?(n++,g=rb.call(a,h)&&fa(a[h],b,c,d,e,f)):void 0}),g&&!d&&p(a,function(a,b,c){return rb.call(c,b)?g=-1<--n:void 0});return e.pop(),f.pop(),i&&(j(e),j(f)),g}function ga(a,b,c,d,e){(Jb(b)?Da:o)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Jb(b))||Pb(b))){for(i=d.length;i--;)if(g=d[i]==b){j=e[i];break}if(!g){var k;c&&(i=c(j,b),k="undefined"!=typeof i)&&(j=i),k||(j=h?Jb(j)?j:[]:Pb(j)?j:{}),d.push(b),e.push(j),k||ga(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function ha(a,b){return a+ob(Fb()*(b-a+1))}function ia(c,d,e){var g=-1,i=ma(),l=c?c.length:0,m=[],n=!d&&l>=s&&i===a,o=e||n?h():m;for(n&&(o=f(o),i=b);++g<l;){var p=c[g],q=e?e(p,g,c):p;(d?!g||o[o.length-1]!==q:0>i(o,q))&&((e||n)&&o.push(q),m.push(p))}return n?(j(o.k),k(o)):e&&j(o),m}function ja(a){return function(b,c,d){var e={};c=X.createCallback(c,d,3),d=-1;var f=b?b.length:0;if("number"==typeof f)for(;++d<f;){var g=b[d];a(e,g,c(g,d,b),b)}else o(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function ka(a,b,c,d,e,f){var g=1&b,h=4&b,i=16&b,j=32&b;if(!(2&b||ua(a)))throw new gb;i&&!c.length&&(b&=-17,i=c=!1),j&&!d.length&&(b&=-33,j=d=!1);var k=a&&a.__bindData__;return k&&!0!==k?(k=l(k),k[2]&&(k[2]=l(k[2])),k[3]&&(k[3]=l(k[3])),!g||1&k[1]||(k[4]=e),!g&&1&k[1]&&(b|=8),!h||4&k[1]||(k[5]=f),i&&sb.apply(k[2]||(k[2]=[]),c),j&&vb.apply(k[3]||(k[3]=[]),d),k[1]|=b,ka.apply(null,k)):(1==b||17===b?Z:ca)([a,b,c,d,e,f])}function la(a){return Lb[a]}function ma(){var b=(b=X.indexOf)===Ma?a:b;return b}function na(a){return"function"==typeof a&&lb.test(a)}function oa(a){var b,c;return a&&kb.call(a)==N&&(b=a.constructor,!ua(b)||b instanceof b)?(p(a,function(a,b){c=b}),"undefined"==typeof c||rb.call(a,c)):!1}function pa(a){return Mb[a]}function qa(a){return a&&"object"==typeof a&&"number"==typeof a.length&&kb.call(a)==H||!1}function ra(a,b,c){var d=Kb(a),e=d.length;for(b=ba(b,c,3);e--&&(c=d[e],!1!==b(a[c],c,a)););return a}function sa(a){var b=[];return p(a,function(a,c){ua(a)&&b.push(c)}),b.sort()}function ta(a){for(var b=-1,c=Kb(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function ua(a){return"function"==typeof a}function va(a){return!(!a||!T[typeof a])}function wa(a){return"number"==typeof a||a&&"object"==typeof a&&kb.call(a)==M||!1}function xa(a){return"string"==typeof a||a&&"object"==typeof a&&kb.call(a)==P||!1}function ya(a){for(var b=-1,c=Kb(a),d=c.length,e=Za(d);++b<d;)e[b]=a[c[b]];return e}function za(a,b,c){var d=-1,e=ma(),f=a?a.length:0,g=!1;return c=(0>c?Cb(0,f+c):c)||0,Jb(a)?g=-1<e(a,b,c):"number"==typeof f?g=-1<(xa(a)?a.indexOf(b,c):e(a,b,c)):o(a,function(a){return++d<c?void 0:!(g=a===b)}),g}function Aa(a,b,c){var d=!0;b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e&&(d=!!b(a[c],c,a)););else o(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Ba(a,b,c){var d=[];b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e;){var f=a[c];b(f,c,a)&&d.push(f)}else o(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Ca(a,b,c){b=X.createCallback(b,c,3),c=-1;var d=a?a.length:0;if("number"!=typeof d){var e;return o(a,function(a,c,d){return b(a,c,d)?(e=a,!1):void 0}),e}for(;++c<d;){var f=a[c];if(b(f,c,a))return f}}function Da(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:ba(b,c,3),"number"==typeof e)for(;++d<e&&!1!==b(a[d],d,a););else o(a,b);return a}function Ea(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:ba(b,c,3),"number"==typeof d)for(;d--&&!1!==b(a[d],d,a););else{var e=Kb(a),d=e.length;o(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function Fa(a,b,c){var d=-1,e=a?a.length:0;if(b=X.createCallback(b,c,3),"number"==typeof e)for(var f=Za(e);++d<e;)f[d]=b(a[d],d,a);else f=[],o(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function Ga(a,b,c){var e=-1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Jb(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];h>f&&(f=h)}}else b=null==b&&xa(a)?d:X.createCallback(b,c,3),Da(a,function(a,c,d){c=b(a,c,d),c>e&&(e=c,f=a)});return f}function Ha(a,b,c,d){if(!a)return c;var e=3>arguments.length;b=X.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else o(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function Ia(a,b,c,d){var e=3>arguments.length;return b=X.createCallback(b,d,4),Ea(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function Ja(a){var b=-1,c=a?a.length:0,d=Za("number"==typeof c?c:0);return Da(a,function(a){var c=ha(0,++b);d[b]=d[c],d[c]=a}),d}function Ka(a,b,c){var d;b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e&&!(d=b(a[c],c,a)););else o(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function La(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=X.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:n;return l(a,0,Db(Cb(0,d),e))}function Ma(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Cb(0,e+d):d||0}else if(d)return d=Oa(b,c),b[d]===c?d:-1;return a(b,c,d)}function Na(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=X.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:Cb(0,b);return l(a,d)}function Oa(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?X.createCallback(c,d,1):Ua,b=c(b);f>e;)d=e+f>>>1,c(a[d])<b?e=d+1:f=d;return e}function Pa(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=X.createCallback(c,d,3)),ia(a,b,c)}function Qa(){for(var a=1<arguments.length?arguments:arguments[0],b=-1,c=a?Ga(Tb(a,"length")):0,d=Za(0>c?0:c);++b<c;)d[b]=Tb(a,b);return d}function Ra(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Jb(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Sa(a,b){return 2<arguments.length?ka(a,17,l(arguments,2),null,b):ka(a,1,null,null,b)}function Ta(a,b,c){function d(){k&&nb(k),g=k=l=n,(p||o!==b)&&(m=Ub(),h=a.apply(j,f),k||g||(f=j=null))}function e(){var c=b-(Ub()-i);c>0?k=tb(e,c):(g&&nb(g),c=l,g=k=l=n,c&&(m=Ub(),h=a.apply(j,f),k||g||(f=j=null)))}var f,g,h,i,j,k,l,m=0,o=!1,p=!0;if(!ua(a))throw new gb;if(b=Cb(0,b)||0,!0===c)var q=!0,p=!1;else va(c)&&(q=c.leading,o="maxWait"in c&&(Cb(b,c.maxWait)||0),p="trailing"in c?c.trailing:p);return function(){if(f=arguments,i=Ub(),j=this,l=p&&(k||!q),!1===o)var c=q&&!k;else{g||q||(m=i);var n=o-(i-m),r=0>=n;r?(g&&(g=nb(g)),m=i,h=a.apply(j,f)):g||(g=tb(d,n))}return r&&k?k=nb(k):k||b===o||(k=tb(e,b)),c&&(r=!0,h=a.apply(j,f)),!r||k||g||(f=j=null),h}}function Ua(a){return a}function Va(a,b,c){var d=!0,e=b&&sa(b);b&&(c||e.length)||(null==c&&(c=b),f=Y,b=a,a=X,e=sa(b)),!1===c?d=!1:va(c)&&"chain"in c&&(d=c.chain);var f=a,g=ua(f);Da(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];if(sb.apply(g,arguments),g=e.apply(a,g),d||b){if(c===g&&va(g))return this;g=new f(g),g.__chain__=b}return g})})}function Wa(){}function Xa(a){return function(b){return b[a]}}function Ya(){return this.__wrapped__}c=c?$.defaults(V.Object(),c,$.pick(V,G)):V;var Za=c.Array,$a=c.Boolean,_a=c.Date,ab=c.Function,bb=c.Math,cb=c.Number,db=c.Object,eb=c.RegExp,fb=c.String,gb=c.TypeError,hb=[],ib=db.prototype,jb=c._,kb=ib.toString,lb=eb("^"+fb(kb).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),mb=bb.ceil,nb=c.clearTimeout,ob=bb.floor,pb=ab.prototype.toString,qb=na(qb=db.getPrototypeOf)&&qb,rb=ib.hasOwnProperty,sb=hb.push,tb=c.setTimeout,ub=hb.splice,vb=hb.unshift,wb=function(){
try{var a={},b=na(b=db.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),xb=na(xb=db.create)&&xb,yb=na(yb=Za.isArray)&&yb,zb=c.isFinite,Ab=c.isNaN,Bb=na(Bb=db.keys)&&Bb,Cb=bb.max,Db=bb.min,Eb=c.parseInt,Fb=bb.random,Gb={};Gb[I]=Za,Gb[J]=$a,Gb[K]=_a,Gb[L]=ab,Gb[N]=db,Gb[M]=cb,Gb[O]=eb,Gb[P]=fb,Y.prototype=X.prototype;var Hb=X.support={};Hb.funcDecomp=!na(c.a)&&E.test(m),Hb.funcNames="string"==typeof ab.name,X.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:B,variable:"",imports:{_:X}},xb||(aa=function(){function a(){}return function(b){if(va(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var Ib=wb?function(a,b){S.value=b,wb(a,"__bindData__",S)}:Wa,Jb=yb||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&kb.call(a)==I||!1},Kb=Bb?function(a){return va(a)?Bb(a):[]}:W,Lb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mb=ta(Lb),Nb=eb("("+Kb(Mb).join("|")+")","g"),Ob=eb("["+Kb(Lb).join("")+"]","g"),Pb=qb?function(a){if(!a||kb.call(a)!=N)return!1;var b=a.valueOf,c=na(b)&&(c=qb(b))&&qb(c);return c?a==c||qb(a)==c:oa(a)}:oa,Qb=ja(function(a,b,c){rb.call(a,c)?a[c]++:a[c]=1}),Rb=ja(function(a,b,c){(rb.call(a,c)?a[c]:a[c]=[]).push(b)}),Sb=ja(function(a,b,c){a[c]=b}),Tb=Fa,Ub=na(Ub=_a.now)&&Ub||function(){return(new _a).getTime()},Vb=8==Eb(u+"08")?Eb:function(a,b){return Eb(xa(a)?a.replace(C,""):a,b||0)};return X.after=function(a,b){if(!ua(b))throw new gb;return function(){return 1>--a?b.apply(this,arguments):void 0}},X.assign=U,X.at=function(a){for(var b=arguments,c=-1,d=ea(b,!0,!1,1),b=b[2]&&b[2][b[1]]===a?1:d.length,e=Za(b);++c<b;)e[c]=a[d[c]];return e},X.bind=Sa,X.bindAll=function(a){for(var b=1<arguments.length?ea(arguments,!0,!1,1):sa(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ka(a[e],1,null,null,a)}return a},X.bindKey=function(a,b){return 2<arguments.length?ka(b,19,l(arguments,2),null,a):ka(b,3,null,null,a)},X.chain=function(a){return a=new Y(a),a.__chain__=!0,a},X.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d},X.compose=function(){for(var a=arguments,b=a.length;b--;)if(!ua(a[b]))throw new gb;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}},X.constant=function(a){return function(){return a}},X.countBy=Qb,X.create=function(a,b){var c=aa(a);return b?U(c,b):c},X.createCallback=function(a,b,c){var d=typeof a;if(null==a||"function"==d)return ba(a,b,c);if("object"!=d)return Xa(a);var e=Kb(a),f=e[0],g=a[f];return 1!=e.length||g!==g||va(g)?function(b){for(var c=e.length,d=!1;c--&&(d=fa(b[e[c]],a[e[c]],null,!0)););return d}:function(a){return a=a[f],g===a&&(0!==g||1/g==1/a)}},X.curry=function(a,b){return b="number"==typeof b?b:+b||a.length,ka(a,4,null,null,null,b)},X.debounce=Ta,X.defaults=t,X.defer=function(a){if(!ua(a))throw new gb;var b=l(arguments,1);return tb(function(){a.apply(n,b)},1)},X.delay=function(a,b){if(!ua(a))throw new gb;var c=l(arguments,2);return tb(function(){a.apply(n,c)},b)},X.difference=function(a){return da(a,ea(arguments,!0,!0,1))},X.filter=Ba,X.flatten=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=Fa(a,c,d)),ea(a,b)},X.forEach=Da,X.forEachRight=Ea,X.forIn=p,X.forInRight=function(a,b,c){var d=[];p(a,function(a,b){d.push(b,a)});var e=d.length;for(b=ba(b,c,3);e--&&!1!==b(d[e--],d[e],a););return a},X.forOwn=o,X.forOwnRight=ra,X.functions=sa,X.groupBy=Rb,X.indexBy=Sb,X.initial=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return l(a,0,Db(Cb(0,e-d),e))},X.intersection=function(){for(var c=[],d=-1,e=arguments.length,g=h(),i=ma(),l=i===a,m=h();++d<e;){var n=arguments[d];(Jb(n)||qa(n))&&(c.push(n),g.push(l&&n.length>=s&&f(d?c[d]:m)))}var l=c[0],o=-1,p=l?l.length:0,q=[];a:for(;++o<p;){var r=g[0],n=l[o];if(0>(r?b(r,n):i(m,n))){for(d=e,(r||m).push(n);--d;)if(r=g[d],0>(r?b(r,n):i(c[d],n)))continue a;q.push(n)}}for(;e--;)(r=g[e])&&k(r);return j(g),j(m),q},X.invert=ta,X.invoke=function(a,b){var c=l(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=Za("number"==typeof f?f:0);return Da(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g},X.keys=Kb,X.map=Fa,X.mapValues=function(a,b,c){var d={};return b=X.createCallback(b,c,3),o(a,function(a,c,e){d[c]=b(a,c,e)}),d},X.max=Ga,X.memoize=function(a,b){function c(){var d=c.cache,e=b?b.apply(this,arguments):r+arguments[0];return rb.call(d,e)?d[e]:d[e]=a.apply(this,arguments)}if(!ua(a))throw new gb;return c.cache={},c},X.merge=function(a){var b=arguments,c=2;if(!va(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=ba(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var b=l(arguments,1,c),e=-1,f=h(),g=h();++e<c;)ga(a,b[e],d,f,g);return j(f),j(g),a},X.min=function(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Jb(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];f>h&&(f=h)}}else b=null==b&&xa(a)?d:X.createCallback(b,c,3),Da(a,function(a,c,d){c=b(a,c,d),e>c&&(e=c,f=a)});return f},X.omit=function(a,b,c){var d={};if("function"!=typeof b){var e=[];p(a,function(a,b){e.push(b)});for(var e=da(e,ea(arguments,!0,!1,1)),f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=X.createCallback(b,c,3),p(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d},X.once=function(a){var b,c;if(!ua(a))throw new gb;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},X.pairs=function(a){for(var b=-1,c=Kb(a),d=c.length,e=Za(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e},X.partial=function(a){return ka(a,16,l(arguments,1))},X.partialRight=function(a){return ka(a,32,null,l(arguments,1))},X.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=ea(arguments,!0,!1,1),g=va(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=X.createCallback(b,c,3),p(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d},X.pluck=Tb,X.property=Xa,X.pull=function(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(ub.call(a,f--,1),e--);return a},X.range=function(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);var d=-1;b=Cb(0,mb((b-a)/(c||1)));for(var e=Za(b);++d<b;)e[d]=a,a+=c;return e},X.reject=function(a,b,c){return b=X.createCallback(b,c,3),Ba(a,function(a,c,d){return!b(a,c,d)})},X.remove=function(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=X.createCallback(b,c,3);++d<e;)c=a[d],b(c,d,a)&&(f.push(c),ub.call(a,d--,1),e--);return f},X.rest=Na,X.shuffle=Ja,X.sortBy=function(a,b,c){var d=-1,f=Jb(b),g=a?a.length:0,l=Za("number"==typeof g?g:0);for(f||(b=X.createCallback(b,c,3)),Da(a,function(a,c,e){var g=l[++d]=i();f?g.m=Fa(b,function(b){return a[b]}):(g.m=h())[0]=b(a,c,e),g.n=d,g.o=a}),g=l.length,l.sort(e);g--;)a=l[g],l[g]=a.o,f||j(a.m),k(a);return l},X.tap=function(a,b){return b(a),a},X.throttle=function(a,b,c){var d=!0,e=!0;if(!ua(a))throw new gb;return!1===c?d=!1:va(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),R.leading=d,R.maxWait=b,R.trailing=e,Ta(a,b,R)},X.times=function(a,b,c){a=-1<(a=+a)?a:0;var d=-1,e=Za(a);for(b=ba(b,c,1);++d<a;)e[d]=b(d);return e},X.toArray=function(a){return a&&"number"==typeof a.length?l(a):ya(a)},X.transform=function(a,b,c,d){var e=Jb(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor;c=aa(f&&f.prototype)}return b&&(b=X.createCallback(b,d,4),(e?Da:o)(a,function(a,d,e){return b(c,a,d,e)})),c},X.union=function(){return ia(ea(arguments,!0,!0))},X.uniq=Pa,X.values=ya,X.where=Ba,X.without=function(a){return da(a,l(arguments,1))},X.wrap=function(a,b){return ka(b,16,[a])},X.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Jb(c)||qa(c))var d=d?ia(da(d,c).concat(da(c,d))):c}return d||[]},X.zip=Qa,X.zipObject=Ra,X.collect=Fa,X.drop=Na,X.each=Da,X.eachRight=Ea,X.extend=U,X.methods=sa,X.object=Ra,X.select=Ba,X.tail=Na,X.unique=Pa,X.unzip=Qa,Va(X),X.clone=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),_(a,b,"function"==typeof c&&ba(c,d,1))},X.cloneDeep=function(a,b,c){return _(a,!0,"function"==typeof b&&ba(b,c,1))},X.contains=za,X.escape=function(a){return null==a?"":fb(a).replace(Ob,la)},X.every=Aa,X.find=Ca,X.findIndex=function(a,b,c){var d=-1,e=a?a.length:0;for(b=X.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1},X.findKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),o(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.findLast=function(a,b,c){var d;return b=X.createCallback(b,c,3),Ea(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d},X.findLastIndex=function(a,b,c){var d=a?a.length:0;for(b=X.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1},X.findLastKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),ra(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.has=function(a,b){return a?rb.call(a,b):!1},X.identity=Ua,X.indexOf=Ma,X.isArguments=qa,X.isArray=Jb,X.isBoolean=function(a){return!0===a||!1===a||a&&"object"==typeof a&&kb.call(a)==J||!1},X.isDate=function(a){return a&&"object"==typeof a&&kb.call(a)==K||!1},X.isElement=function(a){return a&&1===a.nodeType||!1},X.isEmpty=function(a){var b=!0;if(!a)return b;var c=kb.call(a),d=a.length;return c==I||c==P||c==H||c==N&&"number"==typeof d&&ua(a.splice)?!d:(o(a,function(){return b=!1}),b)},X.isEqual=function(a,b,c,d){return fa(a,b,"function"==typeof c&&ba(c,d,2))},X.isFinite=function(a){return zb(a)&&!Ab(parseFloat(a))},X.isFunction=ua,X.isNaN=function(a){return wa(a)&&a!=+a},X.isNull=function(a){return null===a},X.isNumber=wa,X.isObject=va,X.isPlainObject=Pb,X.isRegExp=function(a){return a&&"object"==typeof a&&kb.call(a)==O||!1},X.isString=xa,X.isUndefined=function(a){return"undefined"==typeof a},X.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Cb(0,d+c):Db(c,d-1))+1);d--;)if(a[d]===b)return d;return-1},X.mixin=Va,X.noConflict=function(){return c._=jb,this},X.noop=Wa,X.now=Ub,X.parseInt=Vb,X.random=function(a,b,c){var d=null==a,e=null==b;return null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1?(c=Fb(),Db(a+c*(b-a+parseFloat("1e-"+((c+"").length-1))),b)):ha(a,b)},X.reduce=Ha,X.reduceRight=Ia,X.result=function(a,b){if(a){var c=a[b];return ua(c)?a[b]():c}},X.runInContext=m,X.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Kb(a).length},X.some=Ka,X.sortedIndex=Oa,X.template=function(a,b,c){var d=X.templateSettings;a=fb(a||""),c=t({},c,d);var e,f=t({},c.imports,d.imports),d=Kb(f),f=ya(f),h=0,i=c.interpolate||D,j="__p+='",i=eb((c.escape||D).source+"|"+i.source+"|"+(i===B?y:D).source+"|"+(c.evaluate||D).source+"|$","g");a.replace(i,function(b,c,d,f,i,k){return d||(d=f),j+=a.slice(h,k).replace(F,g),c&&(j+="'+__e("+c+")+'"),i&&(e=!0,j+="';"+i+";\n__p+='"),d&&(j+="'+((__t=("+d+"))==null?'':__t)+'"),h=k+b.length,b}),j+="';",i=c=c.variable,i||(c="obj",j="with("+c+"){"+j+"}"),j=(e?j.replace(v,""):j).replace(w,"$1").replace(x,"$1;"),j="function("+c+"){"+(i?"":c+"||("+c+"={});")+"var __t,__p='',__e=_.escape"+(e?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+j+"return __p}";try{var k=ab(d,"return "+j).apply(n,f)}catch(l){throw l.source=j,l}return b?k(b):(k.source=j,k)},X.unescape=function(a){return null==a?"":fb(a).replace(Nb,pa)},X.uniqueId=function(a){var b=++q;return fb(null==a?"":a)+b},X.all=Aa,X.any=Ka,X.detect=Ca,X.findWhere=Ca,X.foldl=Ha,X.foldr=Ia,X.include=za,X.inject=Ha,Va(function(){var a={};return o(X,function(b,c){X.prototype[c]||(a[c]=b)}),a}(),!1),X.first=La,X.last=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:n;return l(a,Cb(0,e-d))},X.sample=function(a,b,c){return a&&"number"!=typeof a.length&&(a=ya(a)),null==b||c?a?a[ha(0,a.length-1)]:n:(a=Ja(a),a.length=Db(Cb(0,b),a.length),a)},X.take=La,X.head=La,o(X,function(a,b){var c="sample"!==b;X.prototype[b]||(X.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new Y(f,e):f})}),X.VERSION="2.4.1",X.prototype.chain=function(){return this.__chain__=!0,this},X.prototype.toString=function(){return fb(this.__wrapped__)},X.prototype.value=Ya,X.prototype.valueOf=Ya,Da(["join","pop","shift"],function(a){var b=hb[a];X.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new Y(c,a):c}}),Da(["push","reverse","sort","unshift"],function(a){var b=hb[a];X.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Da(["concat","slice","splice"],function(a){var b=hb[a];X.prototype[a]=function(){return new Y(b.apply(this.__wrapped__,arguments),this.__chain__)}}),X}var n,o=[],p=[],q=0,r=+new Date+"",s=75,t=40,u=" 	\f\ufeff\n\r\u2028\u2029",v=/\b__p\+='';/g,w=/\b(__p\+=)''\+/g,x=/(__e\(.*?\)|\b__t\))\+'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,B=/<%=([\s\S]+?)%>/g,C=RegExp("^["+u+"]*0+(?=.$)"),D=/($^)/,E=/\bthis\b/,F=/['\n\r\t\u2028\u2029\\]/g,G="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),H="[object Arguments]",I="[object Array]",J="[object Boolean]",K="[object Date]",L="[object Function]",M="[object Number]",N="[object Object]",O="[object RegExp]",P="[object String]",Q={};Q[L]=!1,Q[H]=Q[I]=Q[J]=Q[K]=Q[M]=Q[N]=Q[O]=Q[P]=!0;var R={leading:!1,maxWait:0,trailing:!1},S={configurable:!1,enumerable:!1,value:null,writable:!1},T={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},U={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},V=T[typeof window]&&window||this,W=T[typeof exports]&&exports&&!exports.nodeType&&exports,X=T[typeof module]&&module&&!module.nodeType&&module,Y=X&&X.exports===W&&W,Z=T[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(V=Z);var $=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(V._=$,define(function(){return $})):W&&X?Y?(X.exports=$)._=$:W._=$:V._=$}.call(this);for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v={},w=0;w<u.length;w++)v[u.charAt(w)]=w;Base64={},Base64.encode=function(a){if("string"==typeof a){var b=a;a=Base64.newBinary(b.length);for(var c=0;c<b.length;c++){var d=b.charCodeAt(c);if(d>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");a[c]=d}}for(var e=[],f=null,g=null,h=null,i=null,c=0;c<a.length;c++)switch(c%3){case 0:f=63&a[c]>>2,g=(3&a[c])<<4;break;case 1:g|=15&a[c]>>4,h=(15&a[c])<<2;break;case 2:h|=3&a[c]>>6,i=63&a[c],e.push(x(f)),e.push(x(g)),e.push(x(h)),e.push(x(i)),f=null,g=null,h=null,i=null}return null!=f&&(e.push(x(f)),e.push(x(g)),e.push(null==h?"=":x(h)),null==i&&e.push("=")),e.join("")};var x=function(a){return u.charAt(a)},y=function(a){return"="===a?-1:v[a]};Base64.newBinary=function(a){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var b=[],c=0;a>c;c++)b.push(0);return b.$Uint8ArrayPolyfill=!0,b}return new Uint8Array(new ArrayBuffer(a))},Base64.decode=function(a){var b=Math.floor(3*a.length/4);"="==a.charAt(a.length-1)&&(b--,"="==a.charAt(a.length-2)&&b--);for(var c=Base64.newBinary(b),d=null,e=null,f=null,g=0,h=0;h<a.length;h++){var i=a.charAt(h),j=y(i);switch(h%4){case 0:if(0>j)throw new Error("invalid base64 string");d=j<<2;break;case 1:if(0>j)throw new Error("invalid base64 string");d|=j>>4,c[g++]=d,e=(15&j)<<4;break;case 2:j>=0&&(e|=j>>2,c[g++]=e,f=(3&j)<<6);break;case 3:j>=0&&(c[g++]=f|j)}}return c},a={},EJSONTest={};var z={};a.addType=function(a,b){if(e.has(z,a))throw new Error("Type "+a+" already present");z[a]=b};var A=function(a){return e.isNaN(a)||1/0===a||a===-1/0},B=[{matchJSONValue:function(a){return e.has(a,"$date")&&1===e.size(a)},matchObject:function(a){return a instanceof Date},toJSONValue:function(a){return{$date:a.getTime()}},fromJSONValue:function(a){return new Date(a.$date)}},{matchJSONValue:function(a){return e.has(a,"$InfNaN")&&1===e.size(a)},matchObject:A,toJSONValue:function(a){var b;return b=e.isNaN(a)?0:1/0===a?1:-1,{$InfNaN:b}},fromJSONValue:function(a){return a.$InfNaN/0}},{matchJSONValue:function(a){return e.has(a,"$binary")&&1===e.size(a)},matchObject:function(a){return"undefined"!=typeof Uint8Array&&a instanceof Uint8Array||a&&e.has(a,"$Uint8ArrayPolyfill")},toJSONValue:function(a){return{$binary:Base64.encode(a)}},fromJSONValue:function(a){return Base64.decode(a.$binary)}},{matchJSONValue:function(a){return e.has(a,"$escape")&&1===e.size(a)},matchObject:function(a){return e.isEmpty(a)||e.size(a)>2?!1:e.any(B,function(b){return b.matchJSONValue(a)})},toJSONValue:function(b){var c={};return e.each(b,function(b,d){c[d]=a.toJSONValue(b)}),{$escape:c}},fromJSONValue:function(b){var c={};return e.each(b.$escape,function(b,d){c[d]=a.fromJSONValue(b)}),c}},{matchJSONValue:function(a){return e.has(a,"$type")&&e.has(a,"$value")&&2===e.size(a)},matchObject:function(b){return a._isCustomType(b)},toJSONValue:function(a){var b=Meteor._noYieldsAllowed(function(){return a.toJSONValue()});return{$type:a.typeName(),$value:b}},fromJSONValue:function(a){var b=a.$type;if(!e.has(z,b))throw new Error("Custom EJSON type "+b+" is not defined");var c=z[b];return Meteor._noYieldsAllowed(function(){return c(a.$value)})}}];a._isCustomType=function(a){return a&&"function"==typeof a.toJSONValue&&"function"==typeof a.typeName&&e.has(z,a.typeName())};var C=a._adjustTypesToJSONValue=function(a){if(null===a)return null;var b=D(a);return void 0!==b?b:"object"!=typeof a?a:(e.each(a,function(b,c){if("object"==typeof b||void 0===b||A(b)){var d=D(b);return d?void(a[c]=d):void C(b)}}),a)},D=function(a){for(var b=0;b<B.length;b++){var c=B[b];if(c.matchObject(a))return c.toJSONValue(a)}return void 0};a.toJSONValue=function(b){var c=D(b);return void 0!==c?c:("object"==typeof b&&(b=a.clone(b),C(b)),b)};var E=a._adjustTypesFromJSONValue=function(a){if(null===a)return null;var b=F(a);return b!==a?b:"object"!=typeof a?a:(e.each(a,function(b,c){if("object"==typeof b){var d=F(b);if(b!==d)return void(a[c]=d);E(b)}}),a)},F=function(a){if("object"==typeof a&&null!==a&&e.size(a)<=2&&e.all(a,function(a,b){return"string"==typeof b&&"$"===b.substr(0,1)}))for(var b=0;b<B.length;b++){var c=B[b];if(c.matchJSONValue(a))return c.fromJSONValue(a)}return a};a.fromJSONValue=function(b){var c=F(b);return c===b&&"object"==typeof b?(b=a.clone(b),E(b),b):c},a.stringify=function(b,c){var d=a.toJSONValue(b);return c&&(c.canonical||c.indent)?a._canonicalStringify(d,c):JSON.stringify(d)},a.parse=function(b){if("string"!=typeof b)throw new Error("EJSON.parse argument should be a string");return a.fromJSONValue(JSON.parse(b))},a.isBinary=function(a){return!!("undefined"!=typeof Uint8Array&&a instanceof Uint8Array||a&&a.$Uint8ArrayPolyfill)},a.equals=function(b,c,d){var f,g=!(!d||!d.keyOrderSensitive);if(b===c)return!0;if(e.isNaN(b)&&e.isNaN(c))return!0;if(!b||!c)return!1;if("object"!=typeof b||"object"!=typeof c)return!1;if(b instanceof Date&&c instanceof Date)return b.valueOf()===c.valueOf();if(a.isBinary(b)&&a.isBinary(c)){if(b.length!==c.length)return!1;for(f=0;f<b.length;f++)if(b[f]!==c[f])return!1;return!0}if("function"==typeof b.equals)return b.equals(c,d);if("function"==typeof c.equals)return c.equals(b,d);if(b instanceof Array){if(!(c instanceof Array))return!1;if(b.length!==c.length)return!1;for(f=0;f<b.length;f++)if(!a.equals(b[f],c[f],d))return!1;return!0}switch(a._isCustomType(b)+a._isCustomType(c)){case 1:return!1;case 2:return a.equals(a.toJSONValue(b),a.toJSONValue(c))}var h;if(g){var i=[];return e.each(c,function(a,b){i.push(b)}),f=0,h=e.all(b,function(b,e){return f>=i.length?!1:e!==i[f]?!1:a.equals(b,c[i[f]],d)?(f++,!0):!1}),h&&f===i.length}return f=0,h=e.all(b,function(b,g){return e.has(c,g)&&a.equals(b,c[g],d)?(f++,!0):!1}),h&&e.size(c)===f},a.clone=function(b){var c;if("object"!=typeof b)return b;if(null===b)return null;if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return b;if(a.isBinary(b)){c=a.newBinary(b.length);for(var d=0;d<b.length;d++)c[d]=b[d];return c}if(e.isArray(b)||e.isArguments(b)){for(c=[],d=0;d<b.length;d++)c[d]=a.clone(b[d]);return c}return"function"==typeof b.clone?b.clone():a._isCustomType(b)?a.fromJSONValue(a.clone(a.toJSONValue(b)),!0):(c={},e.each(b,function(b,d){c[d]=a.clone(b)}),c)},a.newBinary=Base64.newBinary,!function(a){"use strict";if(a.URL=a.URL||a.webkitURL,a.Blob&&a.URL)try{return void new Blob}catch(b){}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=a.ArrayBuffer,r=a.Uint8Array,s=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;return k.createObjectURL||(n=a.URL=function(a){var b,c=document.createElementNS("http://www.w3.org/1999/xhtml","a");return c.href=a,"origin"in c||("data:"===c.protocol.toLowerCase()?c.origin=null:(b=a.match(s),c.origin=b&&b[1])),c}),n.createObjectURL=function(a){var b,c=a.type;return null===c&&(c="application/octet-stream"),a instanceof d?(b="data:"+c,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(r&&(a instanceof q||a instanceof r)){for(var e="",f=new r(a),i=0,j=f.length;j>i;i++)e+=String.fromCharCode(f[i]);c.push(e)}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");var k=new g;c.push(k.readAsBinaryString(a))}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=0,delete this.data},c}(a);a.Blob=function(a,b){var d=b?b.type||"":"",e=new c;if(a)for(var f=0,g=a.length;g>f;f++)e.append(a[f]);return e.getBlob(d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),saveAs=void 0;try{saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=b.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in c,e=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},f=a.webkitRequestFileSystem,g=a.requestFileSystem||f||a.mozRequestFileSystem,h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},i=0,j=function(b){var c=function(){"string"==typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()};a.chrome?c():setTimeout(c,10)},k=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){h(f)}}},l=function(b,h){var l,m,n,o=this,p=b.type,q=!1,r=function(){k(o,["writestart","progress","write","writeend"])},s=function(){(q||!l)&&(l=(a.URL||a.webkitURL||a).createObjectURL(b)),m?m.location.href=l:void 0==a.open(l,"_blank")&&"undefined"!=typeof safari&&(a.location.href=l),o.readyState=o.DONE,r(),j(l)},t=function(a){return function(){return o.readyState!==o.DONE?a.apply(this,arguments):void 0}},u={create:!0,exclusive:!1};o.readyState=o.INIT,h||(h="download"),d?(l=(a.URL||a.webkitURL||a).createObjectURL(b),c.href=l,c.download=h,e(c),o.readyState=o.DONE,r(),j(l)):(a.chrome&&p&&"application/octet-stream"!==p&&(n=b.slice||b.webkitSlice,b=n.call(b,0,b.size,"application/octet-stream"),q=!0),f&&"download"!==h&&(h+=".download"),("application/octet-stream"===p||f)&&(m=a),g?(i+=b.size,g(a.TEMPORARY,i,t(function(a){a.root.getDirectory("saved",u,t(function(a){var c=function(){a.getFile(h,u,t(function(a){a.createWriter(t(function(c){c.onwriteend=function(b){m.location.href=a.toURL(),o.readyState=o.DONE,k(o,"writeend",b),j(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&s()},["writestart","progress","write","abort"].forEach(function(a){c["on"+a]=o["on"+a]}),c.write(b),o.abort=function(){c.abort(),o.readyState=o.DONE},o.readyState=o.WRITING}),s)}),s)};a.getFile(h,{create:!1},t(function(a){a.remove(),c()}),t(function(a){a.code===a.NOT_FOUND_ERR?c():s()}))}),s)}),s)):s())},m=l.prototype;return m.abort=function(){this.readyState=this.DONE,k(this,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,function(a,b){return new l(a,b)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content),"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs})}catch(G){}}).call(this),"undefined"!=typeof module&&module.exports||(Magister={Appointment:this.Appointment,Assignment:this.Assignment,AssignmentVersion:this.AssignmentVersion,Class:this.Class,Course:this.Course,DetailedProfileInfo:this.DetailedProfileInfo,DigitalSchoolUtility:this.DigitalSchoolUtility,File:this.File,FileFolder:this.FileFolder,Grade:this.Grade,GradeType:this.GradeType,Magister:this.Magister,MagisterSchool:this.MagisterSchool,Message:this.Message,MessageFolder:this.MessageFolder,Person:this.Person,ProfileInfo:this.ProfileInfo,StudyGuide:this.StudyGuide,StudyGuidePart:this.StudyGuidePart});